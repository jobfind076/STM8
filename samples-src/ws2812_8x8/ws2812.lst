                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 3.8.0 #10562 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module ws2812
                                      6 	.optsdcc -mstm8
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _set_color
                                     12 	.globl _get_color
                                     13 	.globl _fmod
                                     14 	.globl _delay_10us
                                     15 	.globl _bytes_to_rgb
                                     16 	.globl _uint32_to_rgb
                                     17 	.globl _hsv_to_rgb
                                     18 	.globl _WS2812_wait_spi_sr
                                     19 	.globl _WS2812_send_led_single
                                     20 	.globl _WS2812_send_led_rgb_array
                                     21 	.globl _WS2812_clear
                                     22 	.globl _WS2812_plain_color_fill
                                     23 ;--------------------------------------------------------
                                     24 ; ram data
                                     25 ;--------------------------------------------------------
                                     26 	.area DATA
      000000                         27 _g_leds_matrix:
      000000                         28 	.ds 192
                                     29 ;--------------------------------------------------------
                                     30 ; ram data
                                     31 ;--------------------------------------------------------
                                     32 	.area INITIALIZED
                                     33 ;--------------------------------------------------------
                                     34 ; absolute external ram data
                                     35 ;--------------------------------------------------------
                                     36 	.area DABS (ABS)
                                     37 
                                     38 ; default segment ordering for linker
                                     39 	.area HOME
                                     40 	.area GSINIT
                                     41 	.area GSFINAL
                                     42 	.area CONST
                                     43 	.area INITIALIZER
                                     44 	.area CODE
                                     45 
                                     46 ;--------------------------------------------------------
                                     47 ; global & static initialisations
                                     48 ;--------------------------------------------------------
                                     49 	.area HOME
                                     50 	.area GSINIT
                                     51 	.area GSFINAL
                                     52 	.area GSINIT
                                     53 ;--------------------------------------------------------
                                     54 ; Home
                                     55 ;--------------------------------------------------------
                                     56 	.area HOME
                                     57 	.area HOME
                                     58 ;--------------------------------------------------------
                                     59 ; code
                                     60 ;--------------------------------------------------------
                                     61 	.area CODE
                                     62 ;	ws2812.c: 13: void get_color (uint8_t i_index, RGB* o_color)
                                     63 ;	-----------------------------------------
                                     64 ;	 function get_color
                                     65 ;	-----------------------------------------
      000000                         66 _get_color:
      000000 52 04            [ 2]   67 	sub	sp, #4
                                     68 ;	ws2812.c: 15: o_color->b = g_leds_matrix[i_index % NB_LEDS].b;
      000002 16 08            [ 2]   69 	ldw	y, (0x08, sp)
      000004 17 03            [ 2]   70 	ldw	(0x03, sp), y
      000006 93               [ 1]   71 	ldw	x, y
      000007 5C               [ 1]   72 	incw	x
      000008 5C               [ 1]   73 	incw	x
      000009 1F 01            [ 2]   74 	ldw	(0x01, sp), x
      00000B 7B 07            [ 1]   75 	ld	a, (0x07, sp)
      00000D A4 3F            [ 1]   76 	and	a, #0x3f
      00000F 97               [ 1]   77 	ld	xl, a
      000010 A6 03            [ 1]   78 	ld	a, #0x03
      000012 42               [ 4]   79 	mul	x, a
      000013 1Cr00r00         [ 2]   80 	addw	x, #_g_leds_matrix
      000016 51               [ 1]   81 	exgw	x, y
      000017 93               [ 1]   82 	ldw	x, y
      000018 E6 02            [ 1]   83 	ld	a, (0x2, x)
      00001A 1E 01            [ 2]   84 	ldw	x, (0x01, sp)
      00001C F7               [ 1]   85 	ld	(x), a
                                     86 ;	ws2812.c: 16: o_color->r = g_leds_matrix[i_index % NB_LEDS].r;
      00001D 90 F6            [ 1]   87 	ld	a, (y)
      00001F 1E 03            [ 2]   88 	ldw	x, (0x03, sp)
      000021 F7               [ 1]   89 	ld	(x), a
                                     90 ;	ws2812.c: 17: o_color->g = g_leds_matrix[i_index % NB_LEDS].g;
      000022 1E 03            [ 2]   91 	ldw	x, (0x03, sp)
      000024 5C               [ 1]   92 	incw	x
      000025 90 E6 01         [ 1]   93 	ld	a, (0x1, y)
      000028 F7               [ 1]   94 	ld	(x), a
                                     95 ;	ws2812.c: 18: }
      000029 5B 04            [ 2]   96 	addw	sp, #4
      00002B 81               [ 4]   97 	ret
                                     98 ;	ws2812.c: 20: void set_color (uint8_t i_index, RGB* i_color)
                                     99 ;	-----------------------------------------
                                    100 ;	 function set_color
                                    101 ;	-----------------------------------------
      00002C                        102 _set_color:
      00002C 52 04            [ 2]  103 	sub	sp, #4
                                    104 ;	ws2812.c: 22: g_leds_matrix[i_index % NB_LEDS].b = i_color->b;
      00002E 7B 07            [ 1]  105 	ld	a, (0x07, sp)
      000030 A4 3F            [ 1]  106 	and	a, #0x3f
      000032 97               [ 1]  107 	ld	xl, a
      000033 A6 03            [ 1]  108 	ld	a, #0x03
      000035 42               [ 4]  109 	mul	x, a
      000036 1Cr00r00         [ 2]  110 	addw	x, #_g_leds_matrix
      000039 1F 01            [ 2]  111 	ldw	(0x01, sp), x
      00003B 5C               [ 1]  112 	incw	x
      00003C 5C               [ 1]  113 	incw	x
      00003D 1F 03            [ 2]  114 	ldw	(0x03, sp), x
      00003F 16 08            [ 2]  115 	ldw	y, (0x08, sp)
      000041 93               [ 1]  116 	ldw	x, y
      000042 E6 02            [ 1]  117 	ld	a, (0x2, x)
      000044 1E 03            [ 2]  118 	ldw	x, (0x03, sp)
      000046 F7               [ 1]  119 	ld	(x), a
                                    120 ;	ws2812.c: 23: g_leds_matrix[i_index % NB_LEDS].r = i_color->r;
      000047 90 F6            [ 1]  121 	ld	a, (y)
      000049 1E 01            [ 2]  122 	ldw	x, (0x01, sp)
      00004B F7               [ 1]  123 	ld	(x), a
                                    124 ;	ws2812.c: 24: g_leds_matrix[i_index % NB_LEDS].g = i_color->g;
      00004C 1E 01            [ 2]  125 	ldw	x, (0x01, sp)
      00004E 5C               [ 1]  126 	incw	x
      00004F 90 E6 01         [ 1]  127 	ld	a, (0x1, y)
      000052 F7               [ 1]  128 	ld	(x), a
                                    129 ;	ws2812.c: 25: }
      000053 5B 04            [ 2]  130 	addw	sp, #4
      000055 81               [ 4]  131 	ret
                                    132 ;	ws2812.c: 27: void bytes_to_rgb (RGB* o_color, uint8_t i_r, uint8_t i_g, uint8_t i_b)
                                    133 ;	-----------------------------------------
                                    134 ;	 function bytes_to_rgb
                                    135 ;	-----------------------------------------
      000056                        136 _bytes_to_rgb:
                                    137 ;	ws2812.c: 29: o_color->r = i_r;
      000056 16 03            [ 2]  138 	ldw	y, (0x03, sp)
      000058 7B 05            [ 1]  139 	ld	a, (0x05, sp)
      00005A 90 F7            [ 1]  140 	ld	(y), a
                                    141 ;	ws2812.c: 30: o_color->g = i_g;
      00005C 93               [ 1]  142 	ldw	x, y
      00005D 5C               [ 1]  143 	incw	x
      00005E 7B 06            [ 1]  144 	ld	a, (0x06, sp)
      000060 F7               [ 1]  145 	ld	(x), a
                                    146 ;	ws2812.c: 31: o_color->b = i_b;
      000061 93               [ 1]  147 	ldw	x, y
      000062 5C               [ 1]  148 	incw	x
      000063 5C               [ 1]  149 	incw	x
      000064 7B 07            [ 1]  150 	ld	a, (0x07, sp)
      000066 F7               [ 1]  151 	ld	(x), a
                                    152 ;	ws2812.c: 32: }
      000067 81               [ 4]  153 	ret
                                    154 ;	ws2812.c: 34: void uint32_to_rgb (RGB* o_color, uint32_t i_color)
                                    155 ;	-----------------------------------------
                                    156 ;	 function uint32_to_rgb
                                    157 ;	-----------------------------------------
      000068                        158 _uint32_to_rgb:
      000068 52 06            [ 2]  159 	sub	sp, #6
                                    160 ;	ws2812.c: 36: o_color->r = (i_color >> 16) & 0xFF;
      00006A 16 09            [ 2]  161 	ldw	y, (0x09, sp)
      00006C 1E 0B            [ 2]  162 	ldw	x, (0x0b, sp)
      00006E 0F 01            [ 1]  163 	clr	(0x01, sp)
      000070 9F               [ 1]  164 	ld	a, xl
      000071 90 F7            [ 1]  165 	ld	(y), a
                                    166 ;	ws2812.c: 37: o_color->g = (i_color >> 8) & 0xFF;
      000073 93               [ 1]  167 	ldw	x, y
      000074 5C               [ 1]  168 	incw	x
      000075 1F 05            [ 2]  169 	ldw	(0x05, sp), x
      000077 1E 0D            [ 2]  170 	ldw	x, (0x0d, sp)
      000079 9E               [ 1]  171 	ld	a, xh
      00007A 1E 05            [ 2]  172 	ldw	x, (0x05, sp)
      00007C F7               [ 1]  173 	ld	(x), a
                                    174 ;	ws2812.c: 38: o_color->b = (i_color >> 0) & 0xFF;
      00007D 93               [ 1]  175 	ldw	x, y
      00007E 5C               [ 1]  176 	incw	x
      00007F 5C               [ 1]  177 	incw	x
      000080 7B 0E            [ 1]  178 	ld	a, (0x0e, sp)
      000082 F7               [ 1]  179 	ld	(x), a
                                    180 ;	ws2812.c: 39: }
      000083 5B 06            [ 2]  181 	addw	sp, #6
      000085 81               [ 4]  182 	ret
                                    183 ;	ws2812.c: 41: void hsv_to_rgb (RGB* o_color, uint8_t i_h, uint8_t i_s, uint8_t i_v)
                                    184 ;	-----------------------------------------
                                    185 ;	 function hsv_to_rgb
                                    186 ;	-----------------------------------------
      000086                        187 _hsv_to_rgb:
      000086 52 3D            [ 2]  188 	sub	sp, #61
                                    189 ;	ws2812.c: 45: o_color->r = 0;
      000088 16 40            [ 2]  190 	ldw	y, (0x40, sp)
                                    191 ;	ws2812.c: 46: o_color->g = 0;
      00008A 17 07            [ 2]  192 	ldw	(0x07, sp), y
      00008C 93               [ 1]  193 	ldw	x, y
      00008D 5C               [ 1]  194 	incw	x
      00008E 1F 12            [ 2]  195 	ldw	(0x12, sp), x
                                    196 ;	ws2812.c: 47: o_color->b = 0;
      000090 1E 07            [ 2]  197 	ldw	x, (0x07, sp)
      000092 5C               [ 1]  198 	incw	x
      000093 5C               [ 1]  199 	incw	x
      000094 1F 18            [ 2]  200 	ldw	(0x18, sp), x
                                    201 ;	ws2812.c: 43: if ((i_h > 360) || (i_s > 100) || (i_v > 100))
      000096 7B 43            [ 1]  202 	ld	a, (0x43, sp)
      000098 A1 64            [ 1]  203 	cp	a, #0x64
      00009A 22 06            [ 1]  204 	jrugt	00101$
      00009C 7B 44            [ 1]  205 	ld	a, (0x44, sp)
      00009E A1 64            [ 1]  206 	cp	a, #0x64
      0000A0 23 0C            [ 2]  207 	jrule	00102$
      0000A2                        208 00101$:
                                    209 ;	ws2812.c: 45: o_color->r = 0;
      0000A2 1E 07            [ 2]  210 	ldw	x, (0x07, sp)
      0000A4 7F               [ 1]  211 	clr	(x)
                                    212 ;	ws2812.c: 46: o_color->g = 0;
      0000A5 1E 12            [ 2]  213 	ldw	x, (0x12, sp)
      0000A7 7F               [ 1]  214 	clr	(x)
                                    215 ;	ws2812.c: 47: o_color->b = 0;
      0000A8 1E 18            [ 2]  216 	ldw	x, (0x18, sp)
      0000AA 7F               [ 1]  217 	clr	(x)
                                    218 ;	ws2812.c: 49: return; // err
      0000AB CCr03r24         [ 2]  219 	jp	00125$
      0000AE                        220 00102$:
                                    221 ;	ws2812.c: 52: float s = (float)i_s / 100.0;
      0000AE 7B 43            [ 1]  222 	ld	a, (0x43, sp)
      0000B0 88               [ 1]  223 	push	a
      0000B1 CDr00r00         [ 4]  224 	call	___uchar2fs
      0000B4 84               [ 1]  225 	pop	a
      0000B5 4B 00            [ 1]  226 	push	#0x00
      0000B7 4B 00            [ 1]  227 	push	#0x00
      0000B9 4B C8            [ 1]  228 	push	#0xc8
      0000BB 4B 42            [ 1]  229 	push	#0x42
      0000BD 89               [ 2]  230 	pushw	x
      0000BE 90 89            [ 2]  231 	pushw	y
      0000C0 CDr00r00         [ 4]  232 	call	___fsdiv
      0000C3 5B 08            [ 2]  233 	addw	sp, #8
      0000C5 1F 2C            [ 2]  234 	ldw	(0x2c, sp), x
      0000C7 17 2A            [ 2]  235 	ldw	(0x2a, sp), y
                                    236 ;	ws2812.c: 53: float v = (float)i_v / 100.0;
      0000C9 7B 44            [ 1]  237 	ld	a, (0x44, sp)
      0000CB 88               [ 1]  238 	push	a
      0000CC CDr00r00         [ 4]  239 	call	___uchar2fs
      0000CF 84               [ 1]  240 	pop	a
      0000D0 4B 00            [ 1]  241 	push	#0x00
      0000D2 4B 00            [ 1]  242 	push	#0x00
      0000D4 4B C8            [ 1]  243 	push	#0xc8
      0000D6 4B 42            [ 1]  244 	push	#0x42
      0000D8 89               [ 2]  245 	pushw	x
      0000D9 90 89            [ 2]  246 	pushw	y
      0000DB CDr00r00         [ 4]  247 	call	___fsdiv
      0000DE 5B 08            [ 2]  248 	addw	sp, #8
      0000E0 1F 38            [ 2]  249 	ldw	(0x38, sp), x
      0000E2 17 36            [ 2]  250 	ldw	(0x36, sp), y
                                    251 ;	ws2812.c: 54: float C = s * v;
      0000E4 1E 38            [ 2]  252 	ldw	x, (0x38, sp)
      0000E6 89               [ 2]  253 	pushw	x
      0000E7 1E 38            [ 2]  254 	ldw	x, (0x38, sp)
      0000E9 89               [ 2]  255 	pushw	x
      0000EA 1E 30            [ 2]  256 	ldw	x, (0x30, sp)
      0000EC 89               [ 2]  257 	pushw	x
      0000ED 1E 30            [ 2]  258 	ldw	x, (0x30, sp)
      0000EF 89               [ 2]  259 	pushw	x
      0000F0 CDr00r00         [ 4]  260 	call	___fsmul
      0000F3 5B 08            [ 2]  261 	addw	sp, #8
      0000F5 1F 34            [ 2]  262 	ldw	(0x34, sp), x
      0000F7 17 32            [ 2]  263 	ldw	(0x32, sp), y
                                    264 ;	ws2812.c: 55: float X = C * (1 - abs(fmod(i_h / 60.0, 2.0) - 1));
      0000F9 7B 42            [ 1]  265 	ld	a, (0x42, sp)
      0000FB 88               [ 1]  266 	push	a
      0000FC CDr00r00         [ 4]  267 	call	___uchar2fs
      0000FF 84               [ 1]  268 	pop	a
      000100 4B 00            [ 1]  269 	push	#0x00
      000102 4B 00            [ 1]  270 	push	#0x00
      000104 4B 70            [ 1]  271 	push	#0x70
      000106 4B 42            [ 1]  272 	push	#0x42
      000108 89               [ 2]  273 	pushw	x
      000109 90 89            [ 2]  274 	pushw	y
      00010B CDr00r00         [ 4]  275 	call	___fsdiv
      00010E 5B 08            [ 2]  276 	addw	sp, #8
      000110 1F 05            [ 2]  277 	ldw	(0x05, sp), x
      000112 17 03            [ 2]  278 	ldw	(0x03, sp), y
      000114 5F               [ 1]  279 	clrw	x
      000115 89               [ 2]  280 	pushw	x
      000116 4B 00            [ 1]  281 	push	#0x00
      000118 4B 40            [ 1]  282 	push	#0x40
      00011A 1E 09            [ 2]  283 	ldw	x, (0x09, sp)
      00011C 89               [ 2]  284 	pushw	x
      00011D 1E 09            [ 2]  285 	ldw	x, (0x09, sp)
      00011F 89               [ 2]  286 	pushw	x
      000120 CDr00r00         [ 4]  287 	call	_fmod
      000123 5B 08            [ 2]  288 	addw	sp, #8
      000125 4B 00            [ 1]  289 	push	#0x00
      000127 4B 00            [ 1]  290 	push	#0x00
      000129 4B 80            [ 1]  291 	push	#0x80
      00012B 4B 3F            [ 1]  292 	push	#0x3f
      00012D 89               [ 2]  293 	pushw	x
      00012E 90 89            [ 2]  294 	pushw	y
      000130 CDr00r00         [ 4]  295 	call	___fssub
      000133 5B 08            [ 2]  296 	addw	sp, #8
      000135 89               [ 2]  297 	pushw	x
      000136 90 89            [ 2]  298 	pushw	y
      000138 5F               [ 1]  299 	clrw	x
      000139 89               [ 2]  300 	pushw	x
      00013A 5F               [ 1]  301 	clrw	x
      00013B 89               [ 2]  302 	pushw	x
      00013C CDr00r00         [ 4]  303 	call	___fslt
      00013F 5B 08            [ 2]  304 	addw	sp, #8
      000141 6B 0D            [ 1]  305 	ld	(0x0d, sp), a
      000143 27 27            [ 1]  306 	jreq	00127$
      000145 5F               [ 1]  307 	clrw	x
      000146 89               [ 2]  308 	pushw	x
      000147 4B 00            [ 1]  309 	push	#0x00
      000149 4B 40            [ 1]  310 	push	#0x40
      00014B 1E 09            [ 2]  311 	ldw	x, (0x09, sp)
      00014D 89               [ 2]  312 	pushw	x
      00014E 1E 09            [ 2]  313 	ldw	x, (0x09, sp)
      000150 89               [ 2]  314 	pushw	x
      000151 CDr00r00         [ 4]  315 	call	_fmod
      000154 5B 08            [ 2]  316 	addw	sp, #8
      000156 4B 00            [ 1]  317 	push	#0x00
      000158 4B 00            [ 1]  318 	push	#0x00
      00015A 4B 80            [ 1]  319 	push	#0x80
      00015C 4B 3F            [ 1]  320 	push	#0x3f
      00015E 89               [ 2]  321 	pushw	x
      00015F 90 89            [ 2]  322 	pushw	y
      000161 CDr00r00         [ 4]  323 	call	___fssub
      000164 5B 08            [ 2]  324 	addw	sp, #8
      000166 1F 3C            [ 2]  325 	ldw	(0x3c, sp), x
      000168 17 3A            [ 2]  326 	ldw	(0x3a, sp), y
      00016A 20 40            [ 2]  327 	jra	00128$
      00016C                        328 00127$:
      00016C 5F               [ 1]  329 	clrw	x
      00016D 89               [ 2]  330 	pushw	x
      00016E 4B 00            [ 1]  331 	push	#0x00
      000170 4B 40            [ 1]  332 	push	#0x40
      000172 1E 09            [ 2]  333 	ldw	x, (0x09, sp)
      000174 89               [ 2]  334 	pushw	x
      000175 1E 09            [ 2]  335 	ldw	x, (0x09, sp)
      000177 89               [ 2]  336 	pushw	x
      000178 CDr00r00         [ 4]  337 	call	_fmod
      00017B 5B 08            [ 2]  338 	addw	sp, #8
      00017D 1F 10            [ 2]  339 	ldw	(0x10, sp), x
      00017F 17 0E            [ 2]  340 	ldw	(0x0e, sp), y
      000181 5F               [ 1]  341 	clrw	x
      000182 89               [ 2]  342 	pushw	x
      000183 4B 80            [ 1]  343 	push	#0x80
      000185 4B 3F            [ 1]  344 	push	#0x3f
      000187 1E 14            [ 2]  345 	ldw	x, (0x14, sp)
      000189 89               [ 2]  346 	pushw	x
      00018A 1E 14            [ 2]  347 	ldw	x, (0x14, sp)
      00018C 89               [ 2]  348 	pushw	x
      00018D CDr00r00         [ 4]  349 	call	___fssub
      000190 5B 08            [ 2]  350 	addw	sp, #8
      000192 1F 16            [ 2]  351 	ldw	(0x16, sp), x
      000194 17 14            [ 2]  352 	ldw	(0x14, sp), y
      000196 16 16            [ 2]  353 	ldw	y, (0x16, sp)
      000198 17 0B            [ 2]  354 	ldw	(0x0b, sp), y
      00019A 7B 15            [ 1]  355 	ld	a, (0x15, sp)
      00019C 6B 0A            [ 1]  356 	ld	(0x0a, sp), a
      00019E 7B 14            [ 1]  357 	ld	a, (0x14, sp)
      0001A0 A8 80            [ 1]  358 	xor	a, #0x80
      0001A2 6B 09            [ 1]  359 	ld	(0x09, sp), a
      0001A4 16 0B            [ 2]  360 	ldw	y, (0x0b, sp)
      0001A6 17 3C            [ 2]  361 	ldw	(0x3c, sp), y
      0001A8 16 09            [ 2]  362 	ldw	y, (0x09, sp)
      0001AA 17 3A            [ 2]  363 	ldw	(0x3a, sp), y
      0001AC                        364 00128$:
      0001AC 1E 3C            [ 2]  365 	ldw	x, (0x3c, sp)
      0001AE 89               [ 2]  366 	pushw	x
      0001AF 1E 3C            [ 2]  367 	ldw	x, (0x3c, sp)
      0001B1 89               [ 2]  368 	pushw	x
      0001B2 5F               [ 1]  369 	clrw	x
      0001B3 89               [ 2]  370 	pushw	x
      0001B4 4B 80            [ 1]  371 	push	#0x80
      0001B6 4B 3F            [ 1]  372 	push	#0x3f
      0001B8 CDr00r00         [ 4]  373 	call	___fssub
      0001BB 5B 08            [ 2]  374 	addw	sp, #8
      0001BD 89               [ 2]  375 	pushw	x
      0001BE 90 89            [ 2]  376 	pushw	y
      0001C0 1E 38            [ 2]  377 	ldw	x, (0x38, sp)
      0001C2 89               [ 2]  378 	pushw	x
      0001C3 1E 38            [ 2]  379 	ldw	x, (0x38, sp)
      0001C5 89               [ 2]  380 	pushw	x
      0001C6 CDr00r00         [ 4]  381 	call	___fsmul
      0001C9 5B 08            [ 2]  382 	addw	sp, #8
      0001CB 1F 30            [ 2]  383 	ldw	(0x30, sp), x
      0001CD 17 2E            [ 2]  384 	ldw	(0x2e, sp), y
                                    385 ;	ws2812.c: 56: float m = v - C;
      0001CF 1E 34            [ 2]  386 	ldw	x, (0x34, sp)
      0001D1 89               [ 2]  387 	pushw	x
      0001D2 1E 34            [ 2]  388 	ldw	x, (0x34, sp)
      0001D4 89               [ 2]  389 	pushw	x
      0001D5 1E 3C            [ 2]  390 	ldw	x, (0x3c, sp)
      0001D7 89               [ 2]  391 	pushw	x
      0001D8 1E 3C            [ 2]  392 	ldw	x, (0x3c, sp)
      0001DA 89               [ 2]  393 	pushw	x
      0001DB CDr00r00         [ 4]  394 	call	___fssub
      0001DE 5B 08            [ 2]  395 	addw	sp, #8
      0001E0 1F 20            [ 2]  396 	ldw	(0x20, sp), x
      0001E2 17 1E            [ 2]  397 	ldw	(0x1e, sp), y
                                    398 ;	ws2812.c: 59: if ((i_h >= 0) && (i_h < 60))
      0001E4 7B 42            [ 1]  399 	ld	a, (0x42, sp)
      0001E6 A1 3C            [ 1]  400 	cp	a, #0x3c
      0001E8 4F               [ 1]  401 	clr	a
      0001E9 49               [ 1]  402 	rlc	a
      0001EA 6B 02            [ 1]  403 	ld	(0x02, sp), a
      0001EC 27 18            [ 1]  404 	jreq	00122$
                                    405 ;	ws2812.c: 61: r = C, g = X, b = 0;
      0001EE 16 34            [ 2]  406 	ldw	y, (0x34, sp)
      0001F0 17 1C            [ 2]  407 	ldw	(0x1c, sp), y
      0001F2 16 32            [ 2]  408 	ldw	y, (0x32, sp)
      0001F4 17 1A            [ 2]  409 	ldw	(0x1a, sp), y
      0001F6 16 30            [ 2]  410 	ldw	y, (0x30, sp)
      0001F8 17 28            [ 2]  411 	ldw	(0x28, sp), y
      0001FA 16 2E            [ 2]  412 	ldw	y, (0x2e, sp)
      0001FC 17 26            [ 2]  413 	ldw	(0x26, sp), y
      0001FE 5F               [ 1]  414 	clrw	x
      0001FF 1F 24            [ 2]  415 	ldw	(0x24, sp), x
      000201 1F 22            [ 2]  416 	ldw	(0x22, sp), x
      000203 CCr02rA6         [ 2]  417 	jp	00123$
      000206                        418 00122$:
                                    419 ;	ws2812.c: 63: else if(i_h >= 60 && i_h < 120)
      000206 7B 42            [ 1]  420 	ld	a, (0x42, sp)
      000208 A1 78            [ 1]  421 	cp	a, #0x78
      00020A 4F               [ 1]  422 	clr	a
      00020B 49               [ 1]  423 	rlc	a
      00020C 97               [ 1]  424 	ld	xl, a
      00020D 0D 02            [ 1]  425 	tnz	(0x02, sp)
      00020F 26 1B            [ 1]  426 	jrne	00118$
      000211 9F               [ 1]  427 	ld	a, xl
      000212 4D               [ 1]  428 	tnz	a
      000213 27 17            [ 1]  429 	jreq	00118$
                                    430 ;	ws2812.c: 65: r = X, g = C, b = 0;
      000215 16 30            [ 2]  431 	ldw	y, (0x30, sp)
      000217 17 1C            [ 2]  432 	ldw	(0x1c, sp), y
      000219 16 2E            [ 2]  433 	ldw	y, (0x2e, sp)
      00021B 17 1A            [ 2]  434 	ldw	(0x1a, sp), y
      00021D 16 34            [ 2]  435 	ldw	y, (0x34, sp)
      00021F 17 28            [ 2]  436 	ldw	(0x28, sp), y
      000221 16 32            [ 2]  437 	ldw	y, (0x32, sp)
      000223 17 26            [ 2]  438 	ldw	(0x26, sp), y
      000225 5F               [ 1]  439 	clrw	x
      000226 1F 24            [ 2]  440 	ldw	(0x24, sp), x
      000228 1F 22            [ 2]  441 	ldw	(0x22, sp), x
      00022A 20 7A            [ 2]  442 	jra	00123$
      00022C                        443 00118$:
                                    444 ;	ws2812.c: 67: else if(i_h >= 120 && i_h < 180)
      00022C 7B 42            [ 1]  445 	ld	a, (0x42, sp)
      00022E A1 B4            [ 1]  446 	cp	a, #0xb4
      000230 4F               [ 1]  447 	clr	a
      000231 49               [ 1]  448 	rlc	a
      000232 6B 01            [ 1]  449 	ld	(0x01, sp), a
      000234 9F               [ 1]  450 	ld	a, xl
      000235 4D               [ 1]  451 	tnz	a
      000236 26 1B            [ 1]  452 	jrne	00114$
      000238 0D 01            [ 1]  453 	tnz	(0x01, sp)
      00023A 27 17            [ 1]  454 	jreq	00114$
                                    455 ;	ws2812.c: 69: r = 0, g = C, b = X;
      00023C 5F               [ 1]  456 	clrw	x
      00023D 1F 1C            [ 2]  457 	ldw	(0x1c, sp), x
      00023F 1F 1A            [ 2]  458 	ldw	(0x1a, sp), x
      000241 16 34            [ 2]  459 	ldw	y, (0x34, sp)
      000243 17 28            [ 2]  460 	ldw	(0x28, sp), y
      000245 16 32            [ 2]  461 	ldw	y, (0x32, sp)
      000247 17 26            [ 2]  462 	ldw	(0x26, sp), y
      000249 16 30            [ 2]  463 	ldw	y, (0x30, sp)
      00024B 17 24            [ 2]  464 	ldw	(0x24, sp), y
      00024D 16 2E            [ 2]  465 	ldw	y, (0x2e, sp)
      00024F 17 22            [ 2]  466 	ldw	(0x22, sp), y
      000251 20 53            [ 2]  467 	jra	00123$
      000253                        468 00114$:
                                    469 ;	ws2812.c: 71: else if(i_h >= 180 && i_h < 240)
      000253 7B 42            [ 1]  470 	ld	a, (0x42, sp)
      000255 A1 F0            [ 1]  471 	cp	a, #0xf0
      000257 4F               [ 1]  472 	clr	a
      000258 49               [ 1]  473 	rlc	a
      000259 0D 01            [ 1]  474 	tnz	(0x01, sp)
      00025B 26 1A            [ 1]  475 	jrne	00110$
      00025D 4D               [ 1]  476 	tnz	a
      00025E 27 17            [ 1]  477 	jreq	00110$
                                    478 ;	ws2812.c: 73: r = 0, g = X, b = C;
      000260 5F               [ 1]  479 	clrw	x
      000261 1F 1C            [ 2]  480 	ldw	(0x1c, sp), x
      000263 1F 1A            [ 2]  481 	ldw	(0x1a, sp), x
      000265 16 30            [ 2]  482 	ldw	y, (0x30, sp)
      000267 17 28            [ 2]  483 	ldw	(0x28, sp), y
      000269 16 2E            [ 2]  484 	ldw	y, (0x2e, sp)
      00026B 17 26            [ 2]  485 	ldw	(0x26, sp), y
      00026D 16 34            [ 2]  486 	ldw	y, (0x34, sp)
      00026F 17 24            [ 2]  487 	ldw	(0x24, sp), y
      000271 16 32            [ 2]  488 	ldw	y, (0x32, sp)
      000273 17 22            [ 2]  489 	ldw	(0x22, sp), y
      000275 20 2F            [ 2]  490 	jra	00123$
      000277                        491 00110$:
                                    492 ;	ws2812.c: 75: else if(i_h >= 240 && i_h < 300)
      000277 4D               [ 1]  493 	tnz	a
      000278 26 17            [ 1]  494 	jrne	00106$
                                    495 ;	ws2812.c: 77: r = X, g = 0, b = C;
      00027A 16 30            [ 2]  496 	ldw	y, (0x30, sp)
      00027C 17 1C            [ 2]  497 	ldw	(0x1c, sp), y
      00027E 16 2E            [ 2]  498 	ldw	y, (0x2e, sp)
      000280 17 1A            [ 2]  499 	ldw	(0x1a, sp), y
      000282 5F               [ 1]  500 	clrw	x
      000283 1F 28            [ 2]  501 	ldw	(0x28, sp), x
      000285 1F 26            [ 2]  502 	ldw	(0x26, sp), x
      000287 16 34            [ 2]  503 	ldw	y, (0x34, sp)
      000289 17 24            [ 2]  504 	ldw	(0x24, sp), y
      00028B 16 32            [ 2]  505 	ldw	y, (0x32, sp)
      00028D 17 22            [ 2]  506 	ldw	(0x22, sp), y
      00028F 20 15            [ 2]  507 	jra	00123$
      000291                        508 00106$:
                                    509 ;	ws2812.c: 81: r = C, g = 0, b = X;
      000291 16 34            [ 2]  510 	ldw	y, (0x34, sp)
      000293 17 1C            [ 2]  511 	ldw	(0x1c, sp), y
      000295 16 32            [ 2]  512 	ldw	y, (0x32, sp)
      000297 17 1A            [ 2]  513 	ldw	(0x1a, sp), y
      000299 5F               [ 1]  514 	clrw	x
      00029A 1F 28            [ 2]  515 	ldw	(0x28, sp), x
      00029C 1F 26            [ 2]  516 	ldw	(0x26, sp), x
      00029E 16 30            [ 2]  517 	ldw	y, (0x30, sp)
      0002A0 17 24            [ 2]  518 	ldw	(0x24, sp), y
      0002A2 16 2E            [ 2]  519 	ldw	y, (0x2e, sp)
      0002A4 17 22            [ 2]  520 	ldw	(0x22, sp), y
      0002A6                        521 00123$:
                                    522 ;	ws2812.c: 84: o_color->r = (r + m) * 255;
      0002A6 1E 20            [ 2]  523 	ldw	x, (0x20, sp)
      0002A8 89               [ 2]  524 	pushw	x
      0002A9 1E 20            [ 2]  525 	ldw	x, (0x20, sp)
      0002AB 89               [ 2]  526 	pushw	x
      0002AC 1E 20            [ 2]  527 	ldw	x, (0x20, sp)
      0002AE 89               [ 2]  528 	pushw	x
      0002AF 1E 20            [ 2]  529 	ldw	x, (0x20, sp)
      0002B1 89               [ 2]  530 	pushw	x
      0002B2 CDr00r00         [ 4]  531 	call	___fsadd
      0002B5 5B 08            [ 2]  532 	addw	sp, #8
      0002B7 89               [ 2]  533 	pushw	x
      0002B8 90 89            [ 2]  534 	pushw	y
      0002BA 5F               [ 1]  535 	clrw	x
      0002BB 89               [ 2]  536 	pushw	x
      0002BC 4B 7F            [ 1]  537 	push	#0x7f
      0002BE 4B 43            [ 1]  538 	push	#0x43
      0002C0 CDr00r00         [ 4]  539 	call	___fsmul
      0002C3 5B 08            [ 2]  540 	addw	sp, #8
      0002C5 89               [ 2]  541 	pushw	x
      0002C6 90 89            [ 2]  542 	pushw	y
      0002C8 CDr00r00         [ 4]  543 	call	___fs2uchar
      0002CB 5B 04            [ 2]  544 	addw	sp, #4
      0002CD 1E 07            [ 2]  545 	ldw	x, (0x07, sp)
      0002CF F7               [ 1]  546 	ld	(x), a
                                    547 ;	ws2812.c: 85: o_color->g = (g + m) * 255;
      0002D0 1E 20            [ 2]  548 	ldw	x, (0x20, sp)
      0002D2 89               [ 2]  549 	pushw	x
      0002D3 1E 20            [ 2]  550 	ldw	x, (0x20, sp)
      0002D5 89               [ 2]  551 	pushw	x
      0002D6 1E 2C            [ 2]  552 	ldw	x, (0x2c, sp)
      0002D8 89               [ 2]  553 	pushw	x
      0002D9 1E 2C            [ 2]  554 	ldw	x, (0x2c, sp)
      0002DB 89               [ 2]  555 	pushw	x
      0002DC CDr00r00         [ 4]  556 	call	___fsadd
      0002DF 5B 08            [ 2]  557 	addw	sp, #8
      0002E1 89               [ 2]  558 	pushw	x
      0002E2 90 89            [ 2]  559 	pushw	y
      0002E4 5F               [ 1]  560 	clrw	x
      0002E5 89               [ 2]  561 	pushw	x
      0002E6 4B 7F            [ 1]  562 	push	#0x7f
      0002E8 4B 43            [ 1]  563 	push	#0x43
      0002EA CDr00r00         [ 4]  564 	call	___fsmul
      0002ED 5B 08            [ 2]  565 	addw	sp, #8
      0002EF 89               [ 2]  566 	pushw	x
      0002F0 90 89            [ 2]  567 	pushw	y
      0002F2 CDr00r00         [ 4]  568 	call	___fs2uchar
      0002F5 5B 04            [ 2]  569 	addw	sp, #4
      0002F7 1E 12            [ 2]  570 	ldw	x, (0x12, sp)
      0002F9 F7               [ 1]  571 	ld	(x), a
                                    572 ;	ws2812.c: 86: o_color->b = (b + m) * 255;
      0002FA 1E 20            [ 2]  573 	ldw	x, (0x20, sp)
      0002FC 89               [ 2]  574 	pushw	x
      0002FD 1E 20            [ 2]  575 	ldw	x, (0x20, sp)
      0002FF 89               [ 2]  576 	pushw	x
      000300 1E 28            [ 2]  577 	ldw	x, (0x28, sp)
      000302 89               [ 2]  578 	pushw	x
      000303 1E 28            [ 2]  579 	ldw	x, (0x28, sp)
      000305 89               [ 2]  580 	pushw	x
      000306 CDr00r00         [ 4]  581 	call	___fsadd
      000309 5B 08            [ 2]  582 	addw	sp, #8
      00030B 89               [ 2]  583 	pushw	x
      00030C 90 89            [ 2]  584 	pushw	y
      00030E 5F               [ 1]  585 	clrw	x
      00030F 89               [ 2]  586 	pushw	x
      000310 4B 7F            [ 1]  587 	push	#0x7f
      000312 4B 43            [ 1]  588 	push	#0x43
      000314 CDr00r00         [ 4]  589 	call	___fsmul
      000317 5B 08            [ 2]  590 	addw	sp, #8
      000319 89               [ 2]  591 	pushw	x
      00031A 90 89            [ 2]  592 	pushw	y
      00031C CDr00r00         [ 4]  593 	call	___fs2uchar
      00031F 5B 04            [ 2]  594 	addw	sp, #4
      000321 1E 18            [ 2]  595 	ldw	x, (0x18, sp)
      000323 F7               [ 1]  596 	ld	(x), a
      000324                        597 00125$:
                                    598 ;	ws2812.c: 87: }
      000324 5B 3D            [ 2]  599 	addw	sp, #61
      000326 81               [ 4]  600 	ret
                                    601 ;	ws2812.c: 92: void WS2812_wait_spi_sr(void)
                                    602 ;	-----------------------------------------
                                    603 ;	 function WS2812_wait_spi_sr
                                    604 ;	-----------------------------------------
      000327                        605 _WS2812_wait_spi_sr:
                                    606 ;	ws2812.c: 94: while ((SPI->SR & (uint8_t)SPI_FLAG_TXE) == (uint8_t)RESET)
      000327                        607 00101$:
      000327 C6 52 03         [ 1]  608 	ld	a, 0x5203
      00032A A5 02            [ 1]  609 	bcp	a, #0x02
      00032C 27 F9            [ 1]  610 	jreq	00101$
                                    611 ;	ws2812.c: 96: }
      00032E 81               [ 4]  612 	ret
                                    613 ;	ws2812.c: 101: void WS2812_send_led_single(uint8_t r, uint8_t g, uint8_t b)
                                    614 ;	-----------------------------------------
                                    615 ;	 function WS2812_send_led_single
                                    616 ;	-----------------------------------------
      00032F                        617 _WS2812_send_led_single:
                                    618 ;	ws2812.c: 105: SPI->DR = (g & (1 << 7)) ? WS_1 : WS_0;
      00032F 0D 04            [ 1]  619 	tnz	(0x04, sp)
      000331 2A 04            [ 1]  620 	jrpl	00103$
      000333 AE 00 7C         [ 2]  621 	ldw	x, #0x007c
      000336 BC                     622 	.byte 0xbc
      000337                        623 00103$:
      000337 AE 00 70         [ 2]  624 	ldw	x, #0x0070
      00033A                        625 00104$:
      00033A 9F               [ 1]  626 	ld	a, xl
      00033B C7 52 04         [ 1]  627 	ld	0x5204, a
                                    628 ;	ws2812.c: 106: WS2812_wait_spi_sr();
      00033E CDr03r27         [ 4]  629 	call	_WS2812_wait_spi_sr
                                    630 ;	ws2812.c: 107: SPI->DR = (g & (1 << 6)) ? WS_1 : WS_0;
      000341 7B 04            [ 1]  631 	ld	a, (0x04, sp)
      000343 A5 40            [ 1]  632 	bcp	a, #0x40
      000345 27 04            [ 1]  633 	jreq	00105$
      000347 AE 00 7C         [ 2]  634 	ldw	x, #0x007c
      00034A BC                     635 	.byte 0xbc
      00034B                        636 00105$:
      00034B AE 00 70         [ 2]  637 	ldw	x, #0x0070
      00034E                        638 00106$:
      00034E 9F               [ 1]  639 	ld	a, xl
      00034F C7 52 04         [ 1]  640 	ld	0x5204, a
                                    641 ;	ws2812.c: 108: WS2812_wait_spi_sr();
      000352 CDr03r27         [ 4]  642 	call	_WS2812_wait_spi_sr
                                    643 ;	ws2812.c: 109: SPI->DR = (g & (1 << 5)) ? WS_1 : WS_0;
      000355 7B 04            [ 1]  644 	ld	a, (0x04, sp)
      000357 A5 20            [ 1]  645 	bcp	a, #0x20
      000359 27 04            [ 1]  646 	jreq	00107$
      00035B AE 00 7C         [ 2]  647 	ldw	x, #0x007c
      00035E BC                     648 	.byte 0xbc
      00035F                        649 00107$:
      00035F AE 00 70         [ 2]  650 	ldw	x, #0x0070
      000362                        651 00108$:
      000362 9F               [ 1]  652 	ld	a, xl
      000363 C7 52 04         [ 1]  653 	ld	0x5204, a
                                    654 ;	ws2812.c: 110: WS2812_wait_spi_sr();
      000366 CDr03r27         [ 4]  655 	call	_WS2812_wait_spi_sr
                                    656 ;	ws2812.c: 111: SPI->DR = (g & (1 << 4)) ? WS_1 : WS_0;
      000369 7B 04            [ 1]  657 	ld	a, (0x04, sp)
      00036B A5 10            [ 1]  658 	bcp	a, #0x10
      00036D 27 04            [ 1]  659 	jreq	00109$
      00036F AE 00 7C         [ 2]  660 	ldw	x, #0x007c
      000372 BC                     661 	.byte 0xbc
      000373                        662 00109$:
      000373 AE 00 70         [ 2]  663 	ldw	x, #0x0070
      000376                        664 00110$:
      000376 9F               [ 1]  665 	ld	a, xl
      000377 C7 52 04         [ 1]  666 	ld	0x5204, a
                                    667 ;	ws2812.c: 112: WS2812_wait_spi_sr();
      00037A CDr03r27         [ 4]  668 	call	_WS2812_wait_spi_sr
                                    669 ;	ws2812.c: 113: SPI->DR = (g & (1 << 3)) ? WS_1 : WS_0;
      00037D 7B 04            [ 1]  670 	ld	a, (0x04, sp)
      00037F A5 08            [ 1]  671 	bcp	a, #0x08
      000381 27 04            [ 1]  672 	jreq	00111$
      000383 AE 00 7C         [ 2]  673 	ldw	x, #0x007c
      000386 BC                     674 	.byte 0xbc
      000387                        675 00111$:
      000387 AE 00 70         [ 2]  676 	ldw	x, #0x0070
      00038A                        677 00112$:
      00038A 9F               [ 1]  678 	ld	a, xl
      00038B C7 52 04         [ 1]  679 	ld	0x5204, a
                                    680 ;	ws2812.c: 114: WS2812_wait_spi_sr();
      00038E CDr03r27         [ 4]  681 	call	_WS2812_wait_spi_sr
                                    682 ;	ws2812.c: 115: SPI->DR = (g & (1 << 2)) ? WS_1 : WS_0;
      000391 7B 04            [ 1]  683 	ld	a, (0x04, sp)
      000393 A5 04            [ 1]  684 	bcp	a, #0x04
      000395 27 04            [ 1]  685 	jreq	00113$
      000397 AE 00 7C         [ 2]  686 	ldw	x, #0x007c
      00039A BC                     687 	.byte 0xbc
      00039B                        688 00113$:
      00039B AE 00 70         [ 2]  689 	ldw	x, #0x0070
      00039E                        690 00114$:
      00039E 9F               [ 1]  691 	ld	a, xl
      00039F C7 52 04         [ 1]  692 	ld	0x5204, a
                                    693 ;	ws2812.c: 116: WS2812_wait_spi_sr();
      0003A2 CDr03r27         [ 4]  694 	call	_WS2812_wait_spi_sr
                                    695 ;	ws2812.c: 117: SPI->DR = (g & (1 << 1)) ? WS_1 : WS_0;
      0003A5 7B 04            [ 1]  696 	ld	a, (0x04, sp)
      0003A7 A5 02            [ 1]  697 	bcp	a, #0x02
      0003A9 27 04            [ 1]  698 	jreq	00115$
      0003AB AE 00 7C         [ 2]  699 	ldw	x, #0x007c
      0003AE BC                     700 	.byte 0xbc
      0003AF                        701 00115$:
      0003AF AE 00 70         [ 2]  702 	ldw	x, #0x0070
      0003B2                        703 00116$:
      0003B2 9F               [ 1]  704 	ld	a, xl
      0003B3 C7 52 04         [ 1]  705 	ld	0x5204, a
                                    706 ;	ws2812.c: 118: WS2812_wait_spi_sr();
      0003B6 CDr03r27         [ 4]  707 	call	_WS2812_wait_spi_sr
                                    708 ;	ws2812.c: 119: SPI->DR = (g & 1) ? WS_1 : WS_0;
      0003B9 7B 04            [ 1]  709 	ld	a, (0x04, sp)
      0003BB 44               [ 1]  710 	srl	a
      0003BC 24 04            [ 1]  711 	jrnc	00117$
      0003BE AE 00 7C         [ 2]  712 	ldw	x, #0x007c
      0003C1 BC                     713 	.byte 0xbc
      0003C2                        714 00117$:
      0003C2 AE 00 70         [ 2]  715 	ldw	x, #0x0070
      0003C5                        716 00118$:
      0003C5 9F               [ 1]  717 	ld	a, xl
      0003C6 C7 52 04         [ 1]  718 	ld	0x5204, a
                                    719 ;	ws2812.c: 120: WS2812_wait_spi_sr();
      0003C9 CDr03r27         [ 4]  720 	call	_WS2812_wait_spi_sr
                                    721 ;	ws2812.c: 122: SPI->DR = (r & (1 << 7)) ? WS_1 : WS_0;
      0003CC 0D 03            [ 1]  722 	tnz	(0x03, sp)
      0003CE 2A 04            [ 1]  723 	jrpl	00119$
      0003D0 AE 00 7C         [ 2]  724 	ldw	x, #0x007c
      0003D3 BC                     725 	.byte 0xbc
      0003D4                        726 00119$:
      0003D4 AE 00 70         [ 2]  727 	ldw	x, #0x0070
      0003D7                        728 00120$:
      0003D7 9F               [ 1]  729 	ld	a, xl
      0003D8 C7 52 04         [ 1]  730 	ld	0x5204, a
                                    731 ;	ws2812.c: 123: WS2812_wait_spi_sr();
      0003DB CDr03r27         [ 4]  732 	call	_WS2812_wait_spi_sr
                                    733 ;	ws2812.c: 124: SPI->DR = (r & (1 << 6)) ? WS_1 : WS_0;
      0003DE 7B 03            [ 1]  734 	ld	a, (0x03, sp)
      0003E0 A5 40            [ 1]  735 	bcp	a, #0x40
      0003E2 27 04            [ 1]  736 	jreq	00121$
      0003E4 AE 00 7C         [ 2]  737 	ldw	x, #0x007c
      0003E7 BC                     738 	.byte 0xbc
      0003E8                        739 00121$:
      0003E8 AE 00 70         [ 2]  740 	ldw	x, #0x0070
      0003EB                        741 00122$:
      0003EB 9F               [ 1]  742 	ld	a, xl
      0003EC C7 52 04         [ 1]  743 	ld	0x5204, a
                                    744 ;	ws2812.c: 125: WS2812_wait_spi_sr();
      0003EF CDr03r27         [ 4]  745 	call	_WS2812_wait_spi_sr
                                    746 ;	ws2812.c: 126: SPI->DR = (r & (1 << 5)) ? WS_1 : WS_0;
      0003F2 7B 03            [ 1]  747 	ld	a, (0x03, sp)
      0003F4 A5 20            [ 1]  748 	bcp	a, #0x20
      0003F6 27 04            [ 1]  749 	jreq	00123$
      0003F8 AE 00 7C         [ 2]  750 	ldw	x, #0x007c
      0003FB BC                     751 	.byte 0xbc
      0003FC                        752 00123$:
      0003FC AE 00 70         [ 2]  753 	ldw	x, #0x0070
      0003FF                        754 00124$:
      0003FF 9F               [ 1]  755 	ld	a, xl
      000400 C7 52 04         [ 1]  756 	ld	0x5204, a
                                    757 ;	ws2812.c: 127: WS2812_wait_spi_sr();
      000403 CDr03r27         [ 4]  758 	call	_WS2812_wait_spi_sr
                                    759 ;	ws2812.c: 128: SPI->DR = (r & (1 << 4)) ? WS_1 : WS_0;
      000406 7B 03            [ 1]  760 	ld	a, (0x03, sp)
      000408 A5 10            [ 1]  761 	bcp	a, #0x10
      00040A 27 04            [ 1]  762 	jreq	00125$
      00040C AE 00 7C         [ 2]  763 	ldw	x, #0x007c
      00040F BC                     764 	.byte 0xbc
      000410                        765 00125$:
      000410 AE 00 70         [ 2]  766 	ldw	x, #0x0070
      000413                        767 00126$:
      000413 9F               [ 1]  768 	ld	a, xl
      000414 C7 52 04         [ 1]  769 	ld	0x5204, a
                                    770 ;	ws2812.c: 129: WS2812_wait_spi_sr();
      000417 CDr03r27         [ 4]  771 	call	_WS2812_wait_spi_sr
                                    772 ;	ws2812.c: 130: SPI->DR = (r & (1 << 3)) ? WS_1 : WS_0;
      00041A 7B 03            [ 1]  773 	ld	a, (0x03, sp)
      00041C A5 08            [ 1]  774 	bcp	a, #0x08
      00041E 27 04            [ 1]  775 	jreq	00127$
      000420 AE 00 7C         [ 2]  776 	ldw	x, #0x007c
      000423 BC                     777 	.byte 0xbc
      000424                        778 00127$:
      000424 AE 00 70         [ 2]  779 	ldw	x, #0x0070
      000427                        780 00128$:
      000427 9F               [ 1]  781 	ld	a, xl
      000428 C7 52 04         [ 1]  782 	ld	0x5204, a
                                    783 ;	ws2812.c: 131: WS2812_wait_spi_sr();
      00042B CDr03r27         [ 4]  784 	call	_WS2812_wait_spi_sr
                                    785 ;	ws2812.c: 132: SPI->DR = (r & (1 << 2)) ? WS_1 : WS_0;
      00042E 7B 03            [ 1]  786 	ld	a, (0x03, sp)
      000430 A5 04            [ 1]  787 	bcp	a, #0x04
      000432 27 04            [ 1]  788 	jreq	00129$
      000434 AE 00 7C         [ 2]  789 	ldw	x, #0x007c
      000437 BC                     790 	.byte 0xbc
      000438                        791 00129$:
      000438 AE 00 70         [ 2]  792 	ldw	x, #0x0070
      00043B                        793 00130$:
      00043B 9F               [ 1]  794 	ld	a, xl
      00043C C7 52 04         [ 1]  795 	ld	0x5204, a
                                    796 ;	ws2812.c: 133: WS2812_wait_spi_sr();
      00043F CDr03r27         [ 4]  797 	call	_WS2812_wait_spi_sr
                                    798 ;	ws2812.c: 134: SPI->DR = (r & (1 << 1)) ? WS_1 : WS_0;
      000442 7B 03            [ 1]  799 	ld	a, (0x03, sp)
      000444 A5 02            [ 1]  800 	bcp	a, #0x02
      000446 27 04            [ 1]  801 	jreq	00131$
      000448 AE 00 7C         [ 2]  802 	ldw	x, #0x007c
      00044B BC                     803 	.byte 0xbc
      00044C                        804 00131$:
      00044C AE 00 70         [ 2]  805 	ldw	x, #0x0070
      00044F                        806 00132$:
      00044F 9F               [ 1]  807 	ld	a, xl
      000450 C7 52 04         [ 1]  808 	ld	0x5204, a
                                    809 ;	ws2812.c: 135: WS2812_wait_spi_sr();
      000453 CDr03r27         [ 4]  810 	call	_WS2812_wait_spi_sr
                                    811 ;	ws2812.c: 136: SPI->DR = (r & 1) ? WS_1 : WS_0;
      000456 7B 03            [ 1]  812 	ld	a, (0x03, sp)
      000458 44               [ 1]  813 	srl	a
      000459 24 04            [ 1]  814 	jrnc	00133$
      00045B AE 00 7C         [ 2]  815 	ldw	x, #0x007c
      00045E BC                     816 	.byte 0xbc
      00045F                        817 00133$:
      00045F AE 00 70         [ 2]  818 	ldw	x, #0x0070
      000462                        819 00134$:
      000462 9F               [ 1]  820 	ld	a, xl
      000463 C7 52 04         [ 1]  821 	ld	0x5204, a
                                    822 ;	ws2812.c: 137: WS2812_wait_spi_sr();
      000466 CDr03r27         [ 4]  823 	call	_WS2812_wait_spi_sr
                                    824 ;	ws2812.c: 139: SPI->DR = (b & (1 << 7)) ? WS_1 : WS_0;
      000469 0D 05            [ 1]  825 	tnz	(0x05, sp)
      00046B 2A 04            [ 1]  826 	jrpl	00135$
      00046D AE 00 7C         [ 2]  827 	ldw	x, #0x007c
      000470 BC                     828 	.byte 0xbc
      000471                        829 00135$:
      000471 AE 00 70         [ 2]  830 	ldw	x, #0x0070
      000474                        831 00136$:
      000474 9F               [ 1]  832 	ld	a, xl
      000475 C7 52 04         [ 1]  833 	ld	0x5204, a
                                    834 ;	ws2812.c: 140: WS2812_wait_spi_sr();
      000478 CDr03r27         [ 4]  835 	call	_WS2812_wait_spi_sr
                                    836 ;	ws2812.c: 141: SPI->DR = (b & (1 << 6)) ? WS_1 : WS_0;
      00047B 7B 05            [ 1]  837 	ld	a, (0x05, sp)
      00047D A5 40            [ 1]  838 	bcp	a, #0x40
      00047F 27 04            [ 1]  839 	jreq	00137$
      000481 AE 00 7C         [ 2]  840 	ldw	x, #0x007c
      000484 BC                     841 	.byte 0xbc
      000485                        842 00137$:
      000485 AE 00 70         [ 2]  843 	ldw	x, #0x0070
      000488                        844 00138$:
      000488 9F               [ 1]  845 	ld	a, xl
      000489 C7 52 04         [ 1]  846 	ld	0x5204, a
                                    847 ;	ws2812.c: 142: WS2812_wait_spi_sr();
      00048C CDr03r27         [ 4]  848 	call	_WS2812_wait_spi_sr
                                    849 ;	ws2812.c: 143: SPI->DR = (b & (1 << 5)) ? WS_1 : WS_0;
      00048F 7B 05            [ 1]  850 	ld	a, (0x05, sp)
      000491 A5 20            [ 1]  851 	bcp	a, #0x20
      000493 27 04            [ 1]  852 	jreq	00139$
      000495 AE 00 7C         [ 2]  853 	ldw	x, #0x007c
      000498 BC                     854 	.byte 0xbc
      000499                        855 00139$:
      000499 AE 00 70         [ 2]  856 	ldw	x, #0x0070
      00049C                        857 00140$:
      00049C 9F               [ 1]  858 	ld	a, xl
      00049D C7 52 04         [ 1]  859 	ld	0x5204, a
                                    860 ;	ws2812.c: 144: WS2812_wait_spi_sr();
      0004A0 CDr03r27         [ 4]  861 	call	_WS2812_wait_spi_sr
                                    862 ;	ws2812.c: 145: SPI->DR = (b & (1 << 4)) ? WS_1 : WS_0;
      0004A3 7B 05            [ 1]  863 	ld	a, (0x05, sp)
      0004A5 A5 10            [ 1]  864 	bcp	a, #0x10
      0004A7 27 04            [ 1]  865 	jreq	00141$
      0004A9 AE 00 7C         [ 2]  866 	ldw	x, #0x007c
      0004AC BC                     867 	.byte 0xbc
      0004AD                        868 00141$:
      0004AD AE 00 70         [ 2]  869 	ldw	x, #0x0070
      0004B0                        870 00142$:
      0004B0 9F               [ 1]  871 	ld	a, xl
      0004B1 C7 52 04         [ 1]  872 	ld	0x5204, a
                                    873 ;	ws2812.c: 146: WS2812_wait_spi_sr();
      0004B4 CDr03r27         [ 4]  874 	call	_WS2812_wait_spi_sr
                                    875 ;	ws2812.c: 147: SPI->DR = (b & (1 << 3)) ? WS_1 : WS_0;
      0004B7 7B 05            [ 1]  876 	ld	a, (0x05, sp)
      0004B9 A5 08            [ 1]  877 	bcp	a, #0x08
      0004BB 27 04            [ 1]  878 	jreq	00143$
      0004BD AE 00 7C         [ 2]  879 	ldw	x, #0x007c
      0004C0 BC                     880 	.byte 0xbc
      0004C1                        881 00143$:
      0004C1 AE 00 70         [ 2]  882 	ldw	x, #0x0070
      0004C4                        883 00144$:
      0004C4 9F               [ 1]  884 	ld	a, xl
      0004C5 C7 52 04         [ 1]  885 	ld	0x5204, a
                                    886 ;	ws2812.c: 148: WS2812_wait_spi_sr();
      0004C8 CDr03r27         [ 4]  887 	call	_WS2812_wait_spi_sr
                                    888 ;	ws2812.c: 149: SPI->DR = (b & (1 << 2)) ? WS_1 : WS_0;
      0004CB 7B 05            [ 1]  889 	ld	a, (0x05, sp)
      0004CD A5 04            [ 1]  890 	bcp	a, #0x04
      0004CF 27 04            [ 1]  891 	jreq	00145$
      0004D1 AE 00 7C         [ 2]  892 	ldw	x, #0x007c
      0004D4 BC                     893 	.byte 0xbc
      0004D5                        894 00145$:
      0004D5 AE 00 70         [ 2]  895 	ldw	x, #0x0070
      0004D8                        896 00146$:
      0004D8 9F               [ 1]  897 	ld	a, xl
      0004D9 C7 52 04         [ 1]  898 	ld	0x5204, a
                                    899 ;	ws2812.c: 150: WS2812_wait_spi_sr();
      0004DC CDr03r27         [ 4]  900 	call	_WS2812_wait_spi_sr
                                    901 ;	ws2812.c: 151: SPI->DR = (b & (1 << 1)) ? WS_1 : WS_0;
      0004DF 7B 05            [ 1]  902 	ld	a, (0x05, sp)
      0004E1 A5 02            [ 1]  903 	bcp	a, #0x02
      0004E3 27 04            [ 1]  904 	jreq	00147$
      0004E5 AE 00 7C         [ 2]  905 	ldw	x, #0x007c
      0004E8 BC                     906 	.byte 0xbc
      0004E9                        907 00147$:
      0004E9 AE 00 70         [ 2]  908 	ldw	x, #0x0070
      0004EC                        909 00148$:
      0004EC 9F               [ 1]  910 	ld	a, xl
      0004ED C7 52 04         [ 1]  911 	ld	0x5204, a
                                    912 ;	ws2812.c: 152: WS2812_wait_spi_sr();
      0004F0 CDr03r27         [ 4]  913 	call	_WS2812_wait_spi_sr
                                    914 ;	ws2812.c: 153: SPI->DR = (b & 1) ? WS_1 : WS_0;
      0004F3 7B 05            [ 1]  915 	ld	a, (0x05, sp)
      0004F5 44               [ 1]  916 	srl	a
      0004F6 24 05            [ 1]  917 	jrnc	00149$
      0004F8 AE 00 7C         [ 2]  918 	ldw	x, #0x007c
      0004FB 20 03            [ 2]  919 	jra	00150$
      0004FD                        920 00149$:
      0004FD AE 00 70         [ 2]  921 	ldw	x, #0x0070
      000500                        922 00150$:
      000500 9F               [ 1]  923 	ld	a, xl
      000501 C7 52 04         [ 1]  924 	ld	0x5204, a
                                    925 ;	ws2812.c: 154: WS2812_wait_spi_sr();
                                    926 ;	ws2812.c: 160: }
      000504 CCr03r27         [ 2]  927 	jp	_WS2812_wait_spi_sr
                                    928 ;	ws2812.c: 165: void WS2812_send_led_rgb_array()
                                    929 ;	-----------------------------------------
                                    930 ;	 function WS2812_send_led_rgb_array
                                    931 ;	-----------------------------------------
      000507                        932 _WS2812_send_led_rgb_array:
      000507 89               [ 2]  933 	pushw	x
                                    934 ;	ws2812.c: 168: for (i = 0; i < NB_LEDS; i++)
      000508 0F 01            [ 1]  935 	clr	(0x01, sp)
      00050A                        936 00102$:
                                    937 ;	ws2812.c: 170: WS2812_send_led_single(g_leds_matrix[i].r, g_leds_matrix[i].g, g_leds_matrix[i].b);
      00050A 7B 01            [ 1]  938 	ld	a, (0x01, sp)
      00050C 97               [ 1]  939 	ld	xl, a
      00050D A6 03            [ 1]  940 	ld	a, #0x03
      00050F 42               [ 4]  941 	mul	x, a
      000510 1Cr00r00         [ 2]  942 	addw	x, #_g_leds_matrix
      000513 51               [ 1]  943 	exgw	x, y
      000514 93               [ 1]  944 	ldw	x, y
      000515 E6 02            [ 1]  945 	ld	a, (0x2, x)
      000517 6B 02            [ 1]  946 	ld	(0x02, sp), a
      000519 93               [ 1]  947 	ldw	x, y
      00051A E6 01            [ 1]  948 	ld	a, (0x1, x)
      00051C 97               [ 1]  949 	ld	xl, a
      00051D 90 F6            [ 1]  950 	ld	a, (y)
      00051F 95               [ 1]  951 	ld	xh, a
      000520 7B 02            [ 1]  952 	ld	a, (0x02, sp)
      000522 88               [ 1]  953 	push	a
      000523 9F               [ 1]  954 	ld	a, xl
      000524 88               [ 1]  955 	push	a
      000525 9E               [ 1]  956 	ld	a, xh
      000526 88               [ 1]  957 	push	a
      000527 CDr03r2F         [ 4]  958 	call	_WS2812_send_led_single
      00052A 5B 03            [ 2]  959 	addw	sp, #3
                                    960 ;	ws2812.c: 168: for (i = 0; i < NB_LEDS; i++)
      00052C 0C 01            [ 1]  961 	inc	(0x01, sp)
      00052E 7B 01            [ 1]  962 	ld	a, (0x01, sp)
      000530 A1 40            [ 1]  963 	cp	a, #0x40
      000532 25 D6            [ 1]  964 	jrc	00102$
                                    965 ;	ws2812.c: 172: delay_10us(10); /* RET code 100us */
      000534 4B 0A            [ 1]  966 	push	#0x0a
      000536 4B 00            [ 1]  967 	push	#0x00
      000538 CDr00r00         [ 4]  968 	call	_delay_10us
                                    969 ;	ws2812.c: 173: }
      00053B 5B 04            [ 2]  970 	addw	sp, #4
      00053D 81               [ 4]  971 	ret
                                    972 ;	ws2812.c: 178: void WS2812_clear()
                                    973 ;	-----------------------------------------
                                    974 ;	 function WS2812_clear
                                    975 ;	-----------------------------------------
      00053E                        976 _WS2812_clear:
      00053E 88               [ 1]  977 	push	a
                                    978 ;	ws2812.c: 183: for (i = 0; i < NB_LEDS; i++)
      00053F 4F               [ 1]  979 	clr	a
      000540 97               [ 1]  980 	ld	xl, a
                                    981 ;	ws2812.c: 185: for (j = 0; j < 24; j++)
      000541                        982 00114$:
      000541 0F 01            [ 1]  983 	clr	(0x01, sp)
      000543                        984 00106$:
                                    985 ;	ws2812.c: 187: SPI->DR = WS_0;
      000543 35 70 52 04      [ 1]  986 	mov	0x5204+0, #0x70
                                    987 ;	ws2812.c: 188: while ((SPI->SR & (uint8_t)SPI_FLAG_TXE) == (uint8_t)RESET)
      000547                        988 00101$:
      000547 C6 52 03         [ 1]  989 	ld	a, 0x5203
      00054A A5 02            [ 1]  990 	bcp	a, #0x02
      00054C 27 F9            [ 1]  991 	jreq	00101$
                                    992 ;	ws2812.c: 185: for (j = 0; j < 24; j++)
      00054E 0C 01            [ 1]  993 	inc	(0x01, sp)
      000550 7B 01            [ 1]  994 	ld	a, (0x01, sp)
      000552 A1 18            [ 1]  995 	cp	a, #0x18
      000554 25 ED            [ 1]  996 	jrc	00106$
                                    997 ;	ws2812.c: 183: for (i = 0; i < NB_LEDS; i++)
      000556 5C               [ 1]  998 	incw	x
      000557 9F               [ 1]  999 	ld	a, xl
      000558 A1 40            [ 1] 1000 	cp	a, #0x40
      00055A 25 E5            [ 1] 1001 	jrc	00114$
                                   1002 ;	ws2812.c: 193: delay_10us(10); /* RET code 100 us */
      00055C 4B 0A            [ 1] 1003 	push	#0x0a
      00055E 4B 00            [ 1] 1004 	push	#0x00
      000560 CDr00r00         [ 4] 1005 	call	_delay_10us
                                   1006 ;	ws2812.c: 194: }
      000563 5B 03            [ 2] 1007 	addw	sp, #3
      000565 81               [ 4] 1008 	ret
                                   1009 ;	ws2812.c: 199: void WS2812_plain_color_fill(uint8_t r, uint8_t g, uint8_t b)
                                   1010 ;	-----------------------------------------
                                   1011 ;	 function WS2812_plain_color_fill
                                   1012 ;	-----------------------------------------
      000566                       1013 _WS2812_plain_color_fill:
      000566 88               [ 1] 1014 	push	a
                                   1015 ;	ws2812.c: 201: for (uint8_t i = 0; i < NB_LEDS; i++)
      000567 0F 01            [ 1] 1016 	clr	(0x01, sp)
      000569                       1017 00103$:
      000569 7B 01            [ 1] 1018 	ld	a, (0x01, sp)
      00056B A1 40            [ 1] 1019 	cp	a, #0x40
      00056D 24 12            [ 1] 1020 	jrnc	00101$
                                   1021 ;	ws2812.c: 203: WS2812_send_led_single(r, g, b);
      00056F 7B 06            [ 1] 1022 	ld	a, (0x06, sp)
      000571 88               [ 1] 1023 	push	a
      000572 7B 06            [ 1] 1024 	ld	a, (0x06, sp)
      000574 88               [ 1] 1025 	push	a
      000575 7B 06            [ 1] 1026 	ld	a, (0x06, sp)
      000577 88               [ 1] 1027 	push	a
      000578 CDr03r2F         [ 4] 1028 	call	_WS2812_send_led_single
      00057B 5B 03            [ 2] 1029 	addw	sp, #3
                                   1030 ;	ws2812.c: 201: for (uint8_t i = 0; i < NB_LEDS; i++)
      00057D 0C 01            [ 1] 1031 	inc	(0x01, sp)
      00057F 20 E8            [ 2] 1032 	jra	00103$
      000581                       1033 00101$:
                                   1034 ;	ws2812.c: 206: delay_10us(10); /* RET code 100 us */
      000581 4B 0A            [ 1] 1035 	push	#0x0a
      000583 4B 00            [ 1] 1036 	push	#0x00
      000585 CDr00r00         [ 4] 1037 	call	_delay_10us
                                   1038 ;	ws2812.c: 207: }
      000588 5B 03            [ 2] 1039 	addw	sp, #3
      00058A 81               [ 4] 1040 	ret
                                   1041 	.area CODE
                                   1042 	.area CONST
                                   1043 	.area INITIALIZER
                                   1044 	.area CABS (ABS)
