                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 3.8.0 #10562 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module stm8s_i2c
                                      6 	.optsdcc -mstm8
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _I2C_DeInit
                                     12 	.globl _I2C_Init
                                     13 	.globl _I2C_Cmd
                                     14 	.globl _I2C_GeneralCallCmd
                                     15 	.globl _I2C_GenerateSTART
                                     16 	.globl _I2C_GenerateSTOP
                                     17 	.globl _I2C_SoftwareResetCmd
                                     18 	.globl _I2C_StretchClockCmd
                                     19 	.globl _I2C_AcknowledgeConfig
                                     20 	.globl _I2C_ITConfig
                                     21 	.globl _I2C_FastModeDutyCycleConfig
                                     22 	.globl _I2C_ReceiveData
                                     23 	.globl _I2C_Send7bitAddress
                                     24 	.globl _I2C_SendData
                                     25 	.globl _I2C_CheckEvent
                                     26 	.globl _I2C_GetLastEvent
                                     27 	.globl _I2C_GetFlagStatus
                                     28 	.globl _I2C_ClearFlag
                                     29 	.globl _I2C_GetITStatus
                                     30 	.globl _I2C_ClearITPendingBit
                                     31 ;--------------------------------------------------------
                                     32 ; ram data
                                     33 ;--------------------------------------------------------
                                     34 	.area DATA
                                     35 ;--------------------------------------------------------
                                     36 ; ram data
                                     37 ;--------------------------------------------------------
                                     38 	.area INITIALIZED
                                     39 ;--------------------------------------------------------
                                     40 ; absolute external ram data
                                     41 ;--------------------------------------------------------
                                     42 	.area DABS (ABS)
                                     43 
                                     44 ; default segment ordering for linker
                                     45 	.area HOME
                                     46 	.area GSINIT
                                     47 	.area GSFINAL
                                     48 	.area CONST
                                     49 	.area INITIALIZER
                                     50 	.area CODE
                                     51 
                                     52 ;--------------------------------------------------------
                                     53 ; global & static initialisations
                                     54 ;--------------------------------------------------------
                                     55 	.area HOME
                                     56 	.area GSINIT
                                     57 	.area GSFINAL
                                     58 	.area GSINIT
                                     59 ;--------------------------------------------------------
                                     60 ; Home
                                     61 ;--------------------------------------------------------
                                     62 	.area HOME
                                     63 	.area HOME
                                     64 ;--------------------------------------------------------
                                     65 ; code
                                     66 ;--------------------------------------------------------
                                     67 	.area CODE
                                     68 ;	stm8s_i2c.c: 67: void I2C_DeInit(void)
                                     69 ;	-----------------------------------------
                                     70 ;	 function I2C_DeInit
                                     71 ;	-----------------------------------------
      000000                         72 _I2C_DeInit:
                                     73 ;	stm8s_i2c.c: 69: I2C->CR1 = I2C_CR1_RESET_VALUE;
      000000 35 00 52 10      [ 1]   74 	mov	0x5210+0, #0x00
                                     75 ;	stm8s_i2c.c: 70: I2C->CR2 = I2C_CR2_RESET_VALUE;
      000004 35 00 52 11      [ 1]   76 	mov	0x5211+0, #0x00
                                     77 ;	stm8s_i2c.c: 71: I2C->FREQR = I2C_FREQR_RESET_VALUE;
      000008 35 00 52 12      [ 1]   78 	mov	0x5212+0, #0x00
                                     79 ;	stm8s_i2c.c: 72: I2C->OARL = I2C_OARL_RESET_VALUE;
      00000C 35 00 52 13      [ 1]   80 	mov	0x5213+0, #0x00
                                     81 ;	stm8s_i2c.c: 73: I2C->OARH = I2C_OARH_RESET_VALUE;
      000010 35 00 52 14      [ 1]   82 	mov	0x5214+0, #0x00
                                     83 ;	stm8s_i2c.c: 74: I2C->ITR = I2C_ITR_RESET_VALUE;
      000014 35 00 52 1A      [ 1]   84 	mov	0x521a+0, #0x00
                                     85 ;	stm8s_i2c.c: 75: I2C->CCRL = I2C_CCRL_RESET_VALUE;
      000018 35 00 52 1B      [ 1]   86 	mov	0x521b+0, #0x00
                                     87 ;	stm8s_i2c.c: 76: I2C->CCRH = I2C_CCRH_RESET_VALUE;
      00001C 35 00 52 1C      [ 1]   88 	mov	0x521c+0, #0x00
                                     89 ;	stm8s_i2c.c: 77: I2C->TRISER = I2C_TRISER_RESET_VALUE;
      000020 35 02 52 1D      [ 1]   90 	mov	0x521d+0, #0x02
                                     91 ;	stm8s_i2c.c: 78: }
      000024 81               [ 4]   92 	ret
                                     93 ;	stm8s_i2c.c: 96: void I2C_Init(uint32_t OutputClockFrequencyHz, uint16_t OwnAddress, 
                                     94 ;	-----------------------------------------
                                     95 ;	 function I2C_Init
                                     96 ;	-----------------------------------------
      000025                         97 _I2C_Init:
      000025 52 06            [ 2]   98 	sub	sp, #6
                                     99 ;	stm8s_i2c.c: 102: uint8_t tmpccrh = 0;
      000027 0F 06            [ 1]  100 	clr	(0x06, sp)
                                    101 ;	stm8s_i2c.c: 115: I2C->FREQR &= (uint8_t)(~I2C_FREQR_FREQ);
      000029 C6 52 12         [ 1]  102 	ld	a, 0x5212
      00002C A4 C0            [ 1]  103 	and	a, #0xc0
      00002E C7 52 12         [ 1]  104 	ld	0x5212, a
                                    105 ;	stm8s_i2c.c: 117: I2C->FREQR |= InputClockFrequencyMHz;
      000031 C6 52 12         [ 1]  106 	ld	a, 0x5212
      000034 1A 12            [ 1]  107 	or	a, (0x12, sp)
      000036 C7 52 12         [ 1]  108 	ld	0x5212, a
                                    109 ;	stm8s_i2c.c: 121: I2C->CR1 &= (uint8_t)(~I2C_CR1_PE);
      000039 72 11 52 10      [ 1]  110 	bres	21008, #0
                                    111 ;	stm8s_i2c.c: 124: I2C->CCRH &= (uint8_t)(~(I2C_CCRH_FS | I2C_CCRH_DUTY | I2C_CCRH_CCR));
      00003D C6 52 1C         [ 1]  112 	ld	a, 0x521c
      000040 A4 30            [ 1]  113 	and	a, #0x30
      000042 C7 52 1C         [ 1]  114 	ld	0x521c, a
                                    115 ;	stm8s_i2c.c: 125: I2C->CCRL &= (uint8_t)(~I2C_CCRL_CCR);
      000045 C6 52 1B         [ 1]  116 	ld	a, 0x521b
      000048 35 00 52 1B      [ 1]  117 	mov	0x521b+0, #0x00
                                    118 ;	stm8s_i2c.c: 136: result = (uint16_t) ((InputClockFrequencyMHz * 1000000) / (OutputClockFrequencyHz * 3));
      00004C 5F               [ 1]  119 	clrw	x
      00004D 7B 12            [ 1]  120 	ld	a, (0x12, sp)
      00004F 97               [ 1]  121 	ld	xl, a
      000050 90 5F            [ 1]  122 	clrw	y
      000052 89               [ 2]  123 	pushw	x
      000053 90 89            [ 2]  124 	pushw	y
      000055 4B 40            [ 1]  125 	push	#0x40
      000057 4B 42            [ 1]  126 	push	#0x42
      000059 4B 0F            [ 1]  127 	push	#0x0f
      00005B 4B 00            [ 1]  128 	push	#0x00
      00005D CDr00r00         [ 4]  129 	call	__mullong
      000060 5B 08            [ 2]  130 	addw	sp, #8
      000062 1F 04            [ 2]  131 	ldw	(0x04, sp), x
      000064 17 02            [ 2]  132 	ldw	(0x02, sp), y
                                    133 ;	stm8s_i2c.c: 128: if (OutputClockFrequencyHz > I2C_MAX_STANDARD_FREQ) /* FAST MODE */
      000066 AE 86 A0         [ 2]  134 	ldw	x, #0x86a0
      000069 13 0B            [ 2]  135 	cpw	x, (0x0b, sp)
      00006B A6 01            [ 1]  136 	ld	a, #0x01
      00006D 12 0A            [ 1]  137 	sbc	a, (0x0a, sp)
      00006F 4F               [ 1]  138 	clr	a
      000070 12 09            [ 1]  139 	sbc	a, (0x09, sp)
      000072 25 03            [ 1]  140 	jrc	00133$
      000074 CCr00rF2         [ 2]  141 	jp	00109$
      000077                        142 00133$:
                                    143 ;	stm8s_i2c.c: 131: tmpccrh = I2C_CCRH_FS;
      000077 A6 80            [ 1]  144 	ld	a, #0x80
      000079 6B 06            [ 1]  145 	ld	(0x06, sp), a
                                    146 ;	stm8s_i2c.c: 133: if (I2C_DutyCycle == I2C_DUTYCYCLE_2)
      00007B 0D 0F            [ 1]  147 	tnz	(0x0f, sp)
      00007D 26 22            [ 1]  148 	jrne	00102$
                                    149 ;	stm8s_i2c.c: 136: result = (uint16_t) ((InputClockFrequencyMHz * 1000000) / (OutputClockFrequencyHz * 3));
      00007F 1E 0B            [ 2]  150 	ldw	x, (0x0b, sp)
      000081 89               [ 2]  151 	pushw	x
      000082 1E 0B            [ 2]  152 	ldw	x, (0x0b, sp)
      000084 89               [ 2]  153 	pushw	x
      000085 4B 03            [ 1]  154 	push	#0x03
      000087 5F               [ 1]  155 	clrw	x
      000088 89               [ 2]  156 	pushw	x
      000089 4B 00            [ 1]  157 	push	#0x00
      00008B CDr00r00         [ 4]  158 	call	__mullong
      00008E 5B 08            [ 2]  159 	addw	sp, #8
      000090 89               [ 2]  160 	pushw	x
      000091 90 89            [ 2]  161 	pushw	y
      000093 1E 08            [ 2]  162 	ldw	x, (0x08, sp)
      000095 89               [ 2]  163 	pushw	x
      000096 1E 08            [ 2]  164 	ldw	x, (0x08, sp)
      000098 89               [ 2]  165 	pushw	x
      000099 CDr00r00         [ 4]  166 	call	__divulong
      00009C 5B 08            [ 2]  167 	addw	sp, #8
      00009E 51               [ 1]  168 	exgw	x, y
      00009F 20 27            [ 2]  169 	jra	00103$
      0000A1                        170 00102$:
                                    171 ;	stm8s_i2c.c: 141: result = (uint16_t) ((InputClockFrequencyMHz * 1000000) / (OutputClockFrequencyHz * 25));
      0000A1 1E 0B            [ 2]  172 	ldw	x, (0x0b, sp)
      0000A3 89               [ 2]  173 	pushw	x
      0000A4 1E 0B            [ 2]  174 	ldw	x, (0x0b, sp)
      0000A6 89               [ 2]  175 	pushw	x
      0000A7 4B 19            [ 1]  176 	push	#0x19
      0000A9 5F               [ 1]  177 	clrw	x
      0000AA 89               [ 2]  178 	pushw	x
      0000AB 4B 00            [ 1]  179 	push	#0x00
      0000AD CDr00r00         [ 4]  180 	call	__mullong
      0000B0 5B 08            [ 2]  181 	addw	sp, #8
      0000B2 9F               [ 1]  182 	ld	a, xl
      0000B3 88               [ 1]  183 	push	a
      0000B4 9E               [ 1]  184 	ld	a, xh
      0000B5 88               [ 1]  185 	push	a
      0000B6 90 89            [ 2]  186 	pushw	y
      0000B8 1E 08            [ 2]  187 	ldw	x, (0x08, sp)
      0000BA 89               [ 2]  188 	pushw	x
      0000BB 1E 08            [ 2]  189 	ldw	x, (0x08, sp)
      0000BD 89               [ 2]  190 	pushw	x
      0000BE CDr00r00         [ 4]  191 	call	__divulong
      0000C1 5B 08            [ 2]  192 	addw	sp, #8
      0000C3 51               [ 1]  193 	exgw	x, y
                                    194 ;	stm8s_i2c.c: 143: tmpccrh |= I2C_CCRH_DUTY;
      0000C4 A6 C0            [ 1]  195 	ld	a, #0xc0
      0000C6 6B 06            [ 1]  196 	ld	(0x06, sp), a
      0000C8                        197 00103$:
                                    198 ;	stm8s_i2c.c: 147: if (result < (uint16_t)0x01)
      0000C8 90 A3 00 01      [ 2]  199 	cpw	y, #0x0001
      0000CC 24 04            [ 1]  200 	jrnc	00105$
                                    201 ;	stm8s_i2c.c: 150: result = (uint16_t)0x0001;
      0000CE 90 AE 00 01      [ 2]  202 	ldw	y, #0x0001
      0000D2                        203 00105$:
                                    204 ;	stm8s_i2c.c: 156: tmpval = ((InputClockFrequencyMHz * 3) / 10) + 1;
      0000D2 5F               [ 1]  205 	clrw	x
      0000D3 7B 12            [ 1]  206 	ld	a, (0x12, sp)
      0000D5 97               [ 1]  207 	ld	xl, a
      0000D6 89               [ 2]  208 	pushw	x
      0000D7 58               [ 2]  209 	sllw	x
      0000D8 72 FB 01         [ 2]  210 	addw	x, (1, sp)
      0000DB 5B 02            [ 2]  211 	addw	sp, #2
      0000DD 90 89            [ 2]  212 	pushw	y
      0000DF 4B 0A            [ 1]  213 	push	#0x0a
      0000E1 4B 00            [ 1]  214 	push	#0x00
      0000E3 89               [ 2]  215 	pushw	x
      0000E4 CDr00r00         [ 4]  216 	call	__divsint
      0000E7 5B 04            [ 2]  217 	addw	sp, #4
      0000E9 90 85            [ 2]  218 	popw	y
      0000EB 5C               [ 1]  219 	incw	x
      0000EC 9F               [ 1]  220 	ld	a, xl
                                    221 ;	stm8s_i2c.c: 157: I2C->TRISER = (uint8_t)tmpval;
      0000ED C7 52 1D         [ 1]  222 	ld	0x521d, a
      0000F0 20 26            [ 2]  223 	jra	00110$
      0000F2                        224 00109$:
                                    225 ;	stm8s_i2c.c: 164: result = (uint16_t)((InputClockFrequencyMHz * 1000000) / (OutputClockFrequencyHz << (uint8_t)1));
      0000F2 1E 0B            [ 2]  226 	ldw	x, (0x0b, sp)
      0000F4 16 09            [ 2]  227 	ldw	y, (0x09, sp)
      0000F6 58               [ 2]  228 	sllw	x
      0000F7 90 59            [ 2]  229 	rlcw	y
      0000F9 89               [ 2]  230 	pushw	x
      0000FA 90 89            [ 2]  231 	pushw	y
      0000FC 1E 08            [ 2]  232 	ldw	x, (0x08, sp)
      0000FE 89               [ 2]  233 	pushw	x
      0000FF 1E 08            [ 2]  234 	ldw	x, (0x08, sp)
      000101 89               [ 2]  235 	pushw	x
      000102 CDr00r00         [ 4]  236 	call	__divulong
      000105 5B 08            [ 2]  237 	addw	sp, #8
      000107 51               [ 1]  238 	exgw	x, y
                                    239 ;	stm8s_i2c.c: 167: if (result < (uint16_t)0x0004)
      000108 90 A3 00 04      [ 2]  240 	cpw	y, #0x0004
      00010C 24 04            [ 1]  241 	jrnc	00107$
                                    242 ;	stm8s_i2c.c: 170: result = (uint16_t)0x0004;
      00010E 90 AE 00 04      [ 2]  243 	ldw	y, #0x0004
      000112                        244 00107$:
                                    245 ;	stm8s_i2c.c: 176: I2C->TRISER = (uint8_t)(InputClockFrequencyMHz + (uint8_t)1);
      000112 7B 12            [ 1]  246 	ld	a, (0x12, sp)
      000114 4C               [ 1]  247 	inc	a
      000115 C7 52 1D         [ 1]  248 	ld	0x521d, a
      000118                        249 00110$:
                                    250 ;	stm8s_i2c.c: 181: I2C->CCRL = (uint8_t)result;
      000118 90 9F            [ 1]  251 	ld	a, yl
      00011A C7 52 1B         [ 1]  252 	ld	0x521b, a
                                    253 ;	stm8s_i2c.c: 182: I2C->CCRH = (uint8_t)((uint8_t)((uint8_t)(result >> 8) & I2C_CCRH_CCR) | tmpccrh);
      00011D 90 9E            [ 1]  254 	ld	a, yh
      00011F A4 0F            [ 1]  255 	and	a, #0x0f
      000121 1A 06            [ 1]  256 	or	a, (0x06, sp)
      000123 C7 52 1C         [ 1]  257 	ld	0x521c, a
                                    258 ;	stm8s_i2c.c: 185: I2C->CR1 |= I2C_CR1_PE;
      000126 72 10 52 10      [ 1]  259 	bset	21008, #0
                                    260 ;	stm8s_i2c.c: 188: I2C_AcknowledgeConfig(Ack);
      00012A 7B 10            [ 1]  261 	ld	a, (0x10, sp)
      00012C 88               [ 1]  262 	push	a
      00012D CDr01rC1         [ 4]  263 	call	_I2C_AcknowledgeConfig
      000130 84               [ 1]  264 	pop	a
                                    265 ;	stm8s_i2c.c: 191: I2C->OARL = (uint8_t)(OwnAddress);
      000131 7B 0E            [ 1]  266 	ld	a, (0x0e, sp)
      000133 C7 52 13         [ 1]  267 	ld	0x5213, a
                                    268 ;	stm8s_i2c.c: 192: I2C->OARH = (uint8_t)((uint8_t)(AddMode | I2C_OARH_ADDCONF) |
      000136 7B 11            [ 1]  269 	ld	a, (0x11, sp)
      000138 AA 40            [ 1]  270 	or	a, #0x40
      00013A 6B 01            [ 1]  271 	ld	(0x01, sp), a
                                    272 ;	stm8s_i2c.c: 193: (uint8_t)((OwnAddress & (uint16_t)0x0300) >> (uint8_t)7));
      00013C 4F               [ 1]  273 	clr	a
      00013D 97               [ 1]  274 	ld	xl, a
      00013E 7B 0D            [ 1]  275 	ld	a, (0x0d, sp)
      000140 A4 03            [ 1]  276 	and	a, #0x03
      000142 95               [ 1]  277 	ld	xh, a
      000143 A6 80            [ 1]  278 	ld	a, #0x80
      000145 62               [ 2]  279 	div	x, a
      000146 9F               [ 1]  280 	ld	a, xl
      000147 1A 01            [ 1]  281 	or	a, (0x01, sp)
      000149 C7 52 14         [ 1]  282 	ld	0x5214, a
                                    283 ;	stm8s_i2c.c: 194: }
      00014C 5B 06            [ 2]  284 	addw	sp, #6
      00014E 81               [ 4]  285 	ret
                                    286 ;	stm8s_i2c.c: 202: void I2C_Cmd(FunctionalState NewState)
                                    287 ;	-----------------------------------------
                                    288 ;	 function I2C_Cmd
                                    289 ;	-----------------------------------------
      00014F                        290 _I2C_Cmd:
                                    291 ;	stm8s_i2c.c: 210: I2C->CR1 |= I2C_CR1_PE;
      00014F C6 52 10         [ 1]  292 	ld	a, 0x5210
                                    293 ;	stm8s_i2c.c: 207: if (NewState != DISABLE)
      000152 0D 03            [ 1]  294 	tnz	(0x03, sp)
      000154 27 06            [ 1]  295 	jreq	00102$
                                    296 ;	stm8s_i2c.c: 210: I2C->CR1 |= I2C_CR1_PE;
      000156 AA 01            [ 1]  297 	or	a, #0x01
      000158 C7 52 10         [ 1]  298 	ld	0x5210, a
      00015B 81               [ 4]  299 	ret
      00015C                        300 00102$:
                                    301 ;	stm8s_i2c.c: 215: I2C->CR1 &= (uint8_t)(~I2C_CR1_PE);
      00015C A4 FE            [ 1]  302 	and	a, #0xfe
      00015E C7 52 10         [ 1]  303 	ld	0x5210, a
                                    304 ;	stm8s_i2c.c: 217: }
      000161 81               [ 4]  305 	ret
                                    306 ;	stm8s_i2c.c: 225: void I2C_GeneralCallCmd(FunctionalState NewState)
                                    307 ;	-----------------------------------------
                                    308 ;	 function I2C_GeneralCallCmd
                                    309 ;	-----------------------------------------
      000162                        310 _I2C_GeneralCallCmd:
                                    311 ;	stm8s_i2c.c: 233: I2C->CR1 |= I2C_CR1_ENGC;
      000162 C6 52 10         [ 1]  312 	ld	a, 0x5210
                                    313 ;	stm8s_i2c.c: 230: if (NewState != DISABLE)
      000165 0D 03            [ 1]  314 	tnz	(0x03, sp)
      000167 27 06            [ 1]  315 	jreq	00102$
                                    316 ;	stm8s_i2c.c: 233: I2C->CR1 |= I2C_CR1_ENGC;
      000169 AA 40            [ 1]  317 	or	a, #0x40
      00016B C7 52 10         [ 1]  318 	ld	0x5210, a
      00016E 81               [ 4]  319 	ret
      00016F                        320 00102$:
                                    321 ;	stm8s_i2c.c: 238: I2C->CR1 &= (uint8_t)(~I2C_CR1_ENGC);
      00016F A4 BF            [ 1]  322 	and	a, #0xbf
      000171 C7 52 10         [ 1]  323 	ld	0x5210, a
                                    324 ;	stm8s_i2c.c: 240: }
      000174 81               [ 4]  325 	ret
                                    326 ;	stm8s_i2c.c: 250: void I2C_GenerateSTART(FunctionalState NewState)
                                    327 ;	-----------------------------------------
                                    328 ;	 function I2C_GenerateSTART
                                    329 ;	-----------------------------------------
      000175                        330 _I2C_GenerateSTART:
                                    331 ;	stm8s_i2c.c: 258: I2C->CR2 |= I2C_CR2_START;
      000175 C6 52 11         [ 1]  332 	ld	a, 0x5211
                                    333 ;	stm8s_i2c.c: 255: if (NewState != DISABLE)
      000178 0D 03            [ 1]  334 	tnz	(0x03, sp)
      00017A 27 06            [ 1]  335 	jreq	00102$
                                    336 ;	stm8s_i2c.c: 258: I2C->CR2 |= I2C_CR2_START;
      00017C AA 01            [ 1]  337 	or	a, #0x01
      00017E C7 52 11         [ 1]  338 	ld	0x5211, a
      000181 81               [ 4]  339 	ret
      000182                        340 00102$:
                                    341 ;	stm8s_i2c.c: 263: I2C->CR2 &= (uint8_t)(~I2C_CR2_START);
      000182 A4 FE            [ 1]  342 	and	a, #0xfe
      000184 C7 52 11         [ 1]  343 	ld	0x5211, a
                                    344 ;	stm8s_i2c.c: 265: }
      000187 81               [ 4]  345 	ret
                                    346 ;	stm8s_i2c.c: 273: void I2C_GenerateSTOP(FunctionalState NewState)
                                    347 ;	-----------------------------------------
                                    348 ;	 function I2C_GenerateSTOP
                                    349 ;	-----------------------------------------
      000188                        350 _I2C_GenerateSTOP:
                                    351 ;	stm8s_i2c.c: 281: I2C->CR2 |= I2C_CR2_STOP;
      000188 C6 52 11         [ 1]  352 	ld	a, 0x5211
                                    353 ;	stm8s_i2c.c: 278: if (NewState != DISABLE)
      00018B 0D 03            [ 1]  354 	tnz	(0x03, sp)
      00018D 27 06            [ 1]  355 	jreq	00102$
                                    356 ;	stm8s_i2c.c: 281: I2C->CR2 |= I2C_CR2_STOP;
      00018F AA 02            [ 1]  357 	or	a, #0x02
      000191 C7 52 11         [ 1]  358 	ld	0x5211, a
      000194 81               [ 4]  359 	ret
      000195                        360 00102$:
                                    361 ;	stm8s_i2c.c: 286: I2C->CR2 &= (uint8_t)(~I2C_CR2_STOP);
      000195 A4 FD            [ 1]  362 	and	a, #0xfd
      000197 C7 52 11         [ 1]  363 	ld	0x5211, a
                                    364 ;	stm8s_i2c.c: 288: }
      00019A 81               [ 4]  365 	ret
                                    366 ;	stm8s_i2c.c: 296: void I2C_SoftwareResetCmd(FunctionalState NewState)
                                    367 ;	-----------------------------------------
                                    368 ;	 function I2C_SoftwareResetCmd
                                    369 ;	-----------------------------------------
      00019B                        370 _I2C_SoftwareResetCmd:
                                    371 ;	stm8s_i2c.c: 304: I2C->CR2 |= I2C_CR2_SWRST;
      00019B C6 52 11         [ 1]  372 	ld	a, 0x5211
                                    373 ;	stm8s_i2c.c: 301: if (NewState != DISABLE)
      00019E 0D 03            [ 1]  374 	tnz	(0x03, sp)
      0001A0 27 06            [ 1]  375 	jreq	00102$
                                    376 ;	stm8s_i2c.c: 304: I2C->CR2 |= I2C_CR2_SWRST;
      0001A2 AA 80            [ 1]  377 	or	a, #0x80
      0001A4 C7 52 11         [ 1]  378 	ld	0x5211, a
      0001A7 81               [ 4]  379 	ret
      0001A8                        380 00102$:
                                    381 ;	stm8s_i2c.c: 309: I2C->CR2 &= (uint8_t)(~I2C_CR2_SWRST);
      0001A8 A4 7F            [ 1]  382 	and	a, #0x7f
      0001AA C7 52 11         [ 1]  383 	ld	0x5211, a
                                    384 ;	stm8s_i2c.c: 311: }
      0001AD 81               [ 4]  385 	ret
                                    386 ;	stm8s_i2c.c: 320: void I2C_StretchClockCmd(FunctionalState NewState)
                                    387 ;	-----------------------------------------
                                    388 ;	 function I2C_StretchClockCmd
                                    389 ;	-----------------------------------------
      0001AE                        390 _I2C_StretchClockCmd:
                                    391 ;	stm8s_i2c.c: 328: I2C->CR1 &= (uint8_t)(~I2C_CR1_NOSTRETCH);
      0001AE C6 52 10         [ 1]  392 	ld	a, 0x5210
                                    393 ;	stm8s_i2c.c: 325: if (NewState != DISABLE)
      0001B1 0D 03            [ 1]  394 	tnz	(0x03, sp)
      0001B3 27 06            [ 1]  395 	jreq	00102$
                                    396 ;	stm8s_i2c.c: 328: I2C->CR1 &= (uint8_t)(~I2C_CR1_NOSTRETCH);
      0001B5 A4 7F            [ 1]  397 	and	a, #0x7f
      0001B7 C7 52 10         [ 1]  398 	ld	0x5210, a
      0001BA 81               [ 4]  399 	ret
      0001BB                        400 00102$:
                                    401 ;	stm8s_i2c.c: 334: I2C->CR1 |= I2C_CR1_NOSTRETCH;
      0001BB AA 80            [ 1]  402 	or	a, #0x80
      0001BD C7 52 10         [ 1]  403 	ld	0x5210, a
                                    404 ;	stm8s_i2c.c: 336: }
      0001C0 81               [ 4]  405 	ret
                                    406 ;	stm8s_i2c.c: 345: void I2C_AcknowledgeConfig(I2C_Ack_TypeDef Ack)
                                    407 ;	-----------------------------------------
                                    408 ;	 function I2C_AcknowledgeConfig
                                    409 ;	-----------------------------------------
      0001C1                        410 _I2C_AcknowledgeConfig:
                                    411 ;	stm8s_i2c.c: 353: I2C->CR2 &= (uint8_t)(~I2C_CR2_ACK);
      0001C1 C6 52 11         [ 1]  412 	ld	a, 0x5211
                                    413 ;	stm8s_i2c.c: 350: if (Ack == I2C_ACK_NONE)
      0001C4 0D 03            [ 1]  414 	tnz	(0x03, sp)
      0001C6 26 06            [ 1]  415 	jrne	00105$
                                    416 ;	stm8s_i2c.c: 353: I2C->CR2 &= (uint8_t)(~I2C_CR2_ACK);
      0001C8 A4 FB            [ 1]  417 	and	a, #0xfb
      0001CA C7 52 11         [ 1]  418 	ld	0x5211, a
      0001CD 81               [ 4]  419 	ret
      0001CE                        420 00105$:
                                    421 ;	stm8s_i2c.c: 358: I2C->CR2 |= I2C_CR2_ACK;
      0001CE AA 04            [ 1]  422 	or	a, #0x04
      0001D0 C7 52 11         [ 1]  423 	ld	0x5211, a
                                    424 ;	stm8s_i2c.c: 353: I2C->CR2 &= (uint8_t)(~I2C_CR2_ACK);
      0001D3 C6 52 11         [ 1]  425 	ld	a, 0x5211
                                    426 ;	stm8s_i2c.c: 360: if (Ack == I2C_ACK_CURR)
      0001D6 88               [ 1]  427 	push	a
      0001D7 7B 04            [ 1]  428 	ld	a, (0x04, sp)
      0001D9 4A               [ 1]  429 	dec	a
      0001DA 84               [ 1]  430 	pop	a
      0001DB 26 06            [ 1]  431 	jrne	00102$
                                    432 ;	stm8s_i2c.c: 363: I2C->CR2 &= (uint8_t)(~I2C_CR2_POS);
      0001DD A4 F7            [ 1]  433 	and	a, #0xf7
      0001DF C7 52 11         [ 1]  434 	ld	0x5211, a
      0001E2 81               [ 4]  435 	ret
      0001E3                        436 00102$:
                                    437 ;	stm8s_i2c.c: 368: I2C->CR2 |= I2C_CR2_POS;
      0001E3 AA 08            [ 1]  438 	or	a, #0x08
      0001E5 C7 52 11         [ 1]  439 	ld	0x5211, a
                                    440 ;	stm8s_i2c.c: 371: }
      0001E8 81               [ 4]  441 	ret
                                    442 ;	stm8s_i2c.c: 381: void I2C_ITConfig(I2C_IT_TypeDef I2C_IT, FunctionalState NewState)
                                    443 ;	-----------------------------------------
                                    444 ;	 function I2C_ITConfig
                                    445 ;	-----------------------------------------
      0001E9                        446 _I2C_ITConfig:
      0001E9 88               [ 1]  447 	push	a
                                    448 ;	stm8s_i2c.c: 390: I2C->ITR |= (uint8_t)I2C_IT;
      0001EA C6 52 1A         [ 1]  449 	ld	a, 0x521a
                                    450 ;	stm8s_i2c.c: 387: if (NewState != DISABLE)
      0001ED 0D 05            [ 1]  451 	tnz	(0x05, sp)
      0001EF 27 07            [ 1]  452 	jreq	00102$
                                    453 ;	stm8s_i2c.c: 390: I2C->ITR |= (uint8_t)I2C_IT;
      0001F1 1A 04            [ 1]  454 	or	a, (0x04, sp)
      0001F3 C7 52 1A         [ 1]  455 	ld	0x521a, a
      0001F6 20 0C            [ 2]  456 	jra	00104$
      0001F8                        457 00102$:
                                    458 ;	stm8s_i2c.c: 395: I2C->ITR &= (uint8_t)(~(uint8_t)I2C_IT);
      0001F8 88               [ 1]  459 	push	a
      0001F9 7B 05            [ 1]  460 	ld	a, (0x05, sp)
      0001FB 43               [ 1]  461 	cpl	a
      0001FC 6B 02            [ 1]  462 	ld	(0x02, sp), a
      0001FE 84               [ 1]  463 	pop	a
      0001FF 14 01            [ 1]  464 	and	a, (0x01, sp)
      000201 C7 52 1A         [ 1]  465 	ld	0x521a, a
      000204                        466 00104$:
                                    467 ;	stm8s_i2c.c: 397: }
      000204 84               [ 1]  468 	pop	a
      000205 81               [ 4]  469 	ret
                                    470 ;	stm8s_i2c.c: 405: void I2C_FastModeDutyCycleConfig(I2C_DutyCycle_TypeDef I2C_DutyCycle)
                                    471 ;	-----------------------------------------
                                    472 ;	 function I2C_FastModeDutyCycleConfig
                                    473 ;	-----------------------------------------
      000206                        474 _I2C_FastModeDutyCycleConfig:
                                    475 ;	stm8s_i2c.c: 413: I2C->CCRH |= I2C_CCRH_DUTY;
      000206 C6 52 1C         [ 1]  476 	ld	a, 0x521c
                                    477 ;	stm8s_i2c.c: 410: if (I2C_DutyCycle == I2C_DUTYCYCLE_16_9)
      000209 88               [ 1]  478 	push	a
      00020A 7B 04            [ 1]  479 	ld	a, (0x04, sp)
      00020C A1 40            [ 1]  480 	cp	a, #0x40
      00020E 84               [ 1]  481 	pop	a
      00020F 26 06            [ 1]  482 	jrne	00102$
                                    483 ;	stm8s_i2c.c: 413: I2C->CCRH |= I2C_CCRH_DUTY;
      000211 AA 40            [ 1]  484 	or	a, #0x40
      000213 C7 52 1C         [ 1]  485 	ld	0x521c, a
      000216 81               [ 4]  486 	ret
      000217                        487 00102$:
                                    488 ;	stm8s_i2c.c: 418: I2C->CCRH &= (uint8_t)(~I2C_CCRH_DUTY);
      000217 A4 BF            [ 1]  489 	and	a, #0xbf
      000219 C7 52 1C         [ 1]  490 	ld	0x521c, a
                                    491 ;	stm8s_i2c.c: 420: }
      00021C 81               [ 4]  492 	ret
                                    493 ;	stm8s_i2c.c: 427: uint8_t I2C_ReceiveData(void)
                                    494 ;	-----------------------------------------
                                    495 ;	 function I2C_ReceiveData
                                    496 ;	-----------------------------------------
      00021D                        497 _I2C_ReceiveData:
                                    498 ;	stm8s_i2c.c: 430: return ((uint8_t)I2C->DR);
      00021D C6 52 16         [ 1]  499 	ld	a, 0x5216
                                    500 ;	stm8s_i2c.c: 431: }
      000220 81               [ 4]  501 	ret
                                    502 ;	stm8s_i2c.c: 440: void I2C_Send7bitAddress(uint8_t Address, I2C_Direction_TypeDef Direction)
                                    503 ;	-----------------------------------------
                                    504 ;	 function I2C_Send7bitAddress
                                    505 ;	-----------------------------------------
      000221                        506 _I2C_Send7bitAddress:
                                    507 ;	stm8s_i2c.c: 447: Address &= (uint8_t)0xFE;
      000221 04 03            [ 1]  508 	srl	(0x03, sp)
      000223 08 03            [ 1]  509 	sll	(0x03, sp)
                                    510 ;	stm8s_i2c.c: 450: I2C->DR = (uint8_t)(Address | (uint8_t)Direction);
      000225 7B 03            [ 1]  511 	ld	a, (0x03, sp)
      000227 1A 04            [ 1]  512 	or	a, (0x04, sp)
      000229 C7 52 16         [ 1]  513 	ld	0x5216, a
                                    514 ;	stm8s_i2c.c: 451: }
      00022C 81               [ 4]  515 	ret
                                    516 ;	stm8s_i2c.c: 458: void I2C_SendData(uint8_t Data)
                                    517 ;	-----------------------------------------
                                    518 ;	 function I2C_SendData
                                    519 ;	-----------------------------------------
      00022D                        520 _I2C_SendData:
                                    521 ;	stm8s_i2c.c: 461: I2C->DR = Data;
      00022D AE 52 16         [ 2]  522 	ldw	x, #0x5216
      000230 7B 03            [ 1]  523 	ld	a, (0x03, sp)
      000232 F7               [ 1]  524 	ld	(x), a
                                    525 ;	stm8s_i2c.c: 462: }
      000233 81               [ 4]  526 	ret
                                    527 ;	stm8s_i2c.c: 578: ErrorStatus I2C_CheckEvent(I2C_Event_TypeDef I2C_Event)
                                    528 ;	-----------------------------------------
                                    529 ;	 function I2C_CheckEvent
                                    530 ;	-----------------------------------------
      000234                        531 _I2C_CheckEvent:
      000234 52 08            [ 2]  532 	sub	sp, #8
                                    533 ;	stm8s_i2c.c: 580: __IO uint16_t lastevent = 0x00;
      000236 5F               [ 1]  534 	clrw	x
      000237 1F 01            [ 2]  535 	ldw	(0x01, sp), x
                                    536 ;	stm8s_i2c.c: 588: if (I2C_Event == I2C_EVENT_SLAVE_ACK_FAILURE)
      000239 1E 0B            [ 2]  537 	ldw	x, (0x0b, sp)
      00023B A3 00 04         [ 2]  538 	cpw	x, #0x0004
      00023E 26 0B            [ 1]  539 	jrne	00102$
                                    540 ;	stm8s_i2c.c: 590: lastevent = I2C->SR2 & I2C_SR2_AF;
      000240 C6 52 18         [ 1]  541 	ld	a, 0x5218
      000243 A4 04            [ 1]  542 	and	a, #0x04
      000245 5F               [ 1]  543 	clrw	x
      000246 97               [ 1]  544 	ld	xl, a
      000247 1F 01            [ 2]  545 	ldw	(0x01, sp), x
      000249 20 1A            [ 2]  546 	jra	00103$
      00024B                        547 00102$:
                                    548 ;	stm8s_i2c.c: 594: flag1 = I2C->SR1;
      00024B C6 52 17         [ 1]  549 	ld	a, 0x5217
      00024E 95               [ 1]  550 	ld	xh, a
                                    551 ;	stm8s_i2c.c: 595: flag2 = I2C->SR3;
      00024F C6 52 19         [ 1]  552 	ld	a, 0x5219
                                    553 ;	stm8s_i2c.c: 596: lastevent = ((uint16_t)((uint16_t)flag2 << (uint16_t)8) | (uint16_t)flag1);
      000252 97               [ 1]  554 	ld	xl, a
      000253 0F 08            [ 1]  555 	clr	(0x08, sp)
      000255 9E               [ 1]  556 	ld	a, xh
      000256 0F 05            [ 1]  557 	clr	(0x05, sp)
      000258 1A 08            [ 1]  558 	or	a, (0x08, sp)
      00025A 6B 04            [ 1]  559 	ld	(0x04, sp), a
      00025C 9F               [ 1]  560 	ld	a, xl
      00025D 1A 05            [ 1]  561 	or	a, (0x05, sp)
      00025F 6B 01            [ 1]  562 	ld	(0x01, sp), a
      000261 7B 04            [ 1]  563 	ld	a, (0x04, sp)
      000263 6B 02            [ 1]  564 	ld	(0x02, sp), a
      000265                        565 00103$:
                                    566 ;	stm8s_i2c.c: 599: if (((uint16_t)lastevent & (uint16_t)I2C_Event) == (uint16_t)I2C_Event)
      000265 7B 02            [ 1]  567 	ld	a, (0x02, sp)
      000267 14 0C            [ 1]  568 	and	a, (0x0c, sp)
      000269 97               [ 1]  569 	ld	xl, a
      00026A 7B 01            [ 1]  570 	ld	a, (0x01, sp)
      00026C 14 0B            [ 1]  571 	and	a, (0x0b, sp)
      00026E 95               [ 1]  572 	ld	xh, a
      00026F 13 0B            [ 2]  573 	cpw	x, (0x0b, sp)
      000271 26 03            [ 1]  574 	jrne	00105$
                                    575 ;	stm8s_i2c.c: 602: status = SUCCESS;
      000273 A6 01            [ 1]  576 	ld	a, #0x01
                                    577 ;	stm8s_i2c.c: 607: status = ERROR;
      000275 21                     578 	.byte 0x21
      000276                        579 00105$:
      000276 4F               [ 1]  580 	clr	a
      000277                        581 00106$:
                                    582 ;	stm8s_i2c.c: 611: return status;
                                    583 ;	stm8s_i2c.c: 612: }
      000277 5B 08            [ 2]  584 	addw	sp, #8
      000279 81               [ 4]  585 	ret
                                    586 ;	stm8s_i2c.c: 628: I2C_Event_TypeDef I2C_GetLastEvent(void)
                                    587 ;	-----------------------------------------
                                    588 ;	 function I2C_GetLastEvent
                                    589 ;	-----------------------------------------
      00027A                        590 _I2C_GetLastEvent:
      00027A 52 04            [ 2]  591 	sub	sp, #4
                                    592 ;	stm8s_i2c.c: 630: __IO uint16_t lastevent = 0;
      00027C 5F               [ 1]  593 	clrw	x
      00027D 1F 01            [ 2]  594 	ldw	(0x01, sp), x
                                    595 ;	stm8s_i2c.c: 634: if ((I2C->SR2 & I2C_SR2_AF) != 0x00)
      00027F C6 52 18         [ 1]  596 	ld	a, 0x5218
      000282 A5 04            [ 1]  597 	bcp	a, #0x04
      000284 27 07            [ 1]  598 	jreq	00102$
                                    599 ;	stm8s_i2c.c: 636: lastevent = I2C_EVENT_SLAVE_ACK_FAILURE;
      000286 AE 00 04         [ 2]  600 	ldw	x, #0x0004
      000289 1F 01            [ 2]  601 	ldw	(0x01, sp), x
      00028B 20 13            [ 2]  602 	jra	00103$
      00028D                        603 00102$:
                                    604 ;	stm8s_i2c.c: 641: flag1 = I2C->SR1;
      00028D C6 52 17         [ 1]  605 	ld	a, 0x5217
      000290 5F               [ 1]  606 	clrw	x
      000291 97               [ 1]  607 	ld	xl, a
      000292 1F 03            [ 2]  608 	ldw	(0x03, sp), x
                                    609 ;	stm8s_i2c.c: 642: flag2 = I2C->SR3;
      000294 C6 52 19         [ 1]  610 	ld	a, 0x5219
      000297 95               [ 1]  611 	ld	xh, a
                                    612 ;	stm8s_i2c.c: 645: lastevent = ((uint16_t)((uint16_t)flag2 << 8) | (uint16_t)flag1);
      000298 7B 04            [ 1]  613 	ld	a, (0x04, sp)
      00029A 02               [ 1]  614 	rlwa	x
      00029B 1A 03            [ 1]  615 	or	a, (0x03, sp)
      00029D 95               [ 1]  616 	ld	xh, a
      00029E 1F 01            [ 2]  617 	ldw	(0x01, sp), x
      0002A0                        618 00103$:
                                    619 ;	stm8s_i2c.c: 648: return (I2C_Event_TypeDef)lastevent;
      0002A0 1E 01            [ 2]  620 	ldw	x, (0x01, sp)
                                    621 ;	stm8s_i2c.c: 649: }
      0002A2 5B 04            [ 2]  622 	addw	sp, #4
      0002A4 81               [ 4]  623 	ret
                                    624 ;	stm8s_i2c.c: 679: FlagStatus I2C_GetFlagStatus(I2C_Flag_TypeDef I2C_Flag)
                                    625 ;	-----------------------------------------
                                    626 ;	 function I2C_GetFlagStatus
                                    627 ;	-----------------------------------------
      0002A5                        628 _I2C_GetFlagStatus:
                                    629 ;	stm8s_i2c.c: 681: uint8_t tempreg = 0;
      0002A5 4F               [ 1]  630 	clr	a
      0002A6 97               [ 1]  631 	ld	xl, a
                                    632 ;	stm8s_i2c.c: 689: regindex = (uint8_t)((uint16_t)I2C_Flag >> 8);
      0002A7 7B 03            [ 1]  633 	ld	a, (0x03, sp)
      0002A9 90 5F            [ 1]  634 	clrw	y
                                    635 ;	stm8s_i2c.c: 691: switch (regindex)
      0002AB A1 01            [ 1]  636 	cp	a, #0x01
      0002AD 27 0A            [ 1]  637 	jreq	00101$
      0002AF A1 02            [ 1]  638 	cp	a, #0x02
      0002B1 27 0C            [ 1]  639 	jreq	00102$
      0002B3 A1 03            [ 1]  640 	cp	a, #0x03
      0002B5 27 0E            [ 1]  641 	jreq	00103$
      0002B7 20 10            [ 2]  642 	jra	00105$
                                    643 ;	stm8s_i2c.c: 694: case 0x01:
      0002B9                        644 00101$:
                                    645 ;	stm8s_i2c.c: 695: tempreg = (uint8_t)I2C->SR1;
      0002B9 C6 52 17         [ 1]  646 	ld	a, 0x5217
      0002BC 97               [ 1]  647 	ld	xl, a
                                    648 ;	stm8s_i2c.c: 696: break;
      0002BD 20 0A            [ 2]  649 	jra	00105$
                                    650 ;	stm8s_i2c.c: 699: case 0x02:
      0002BF                        651 00102$:
                                    652 ;	stm8s_i2c.c: 700: tempreg = (uint8_t)I2C->SR2;
      0002BF C6 52 18         [ 1]  653 	ld	a, 0x5218
      0002C2 97               [ 1]  654 	ld	xl, a
                                    655 ;	stm8s_i2c.c: 701: break;
      0002C3 20 04            [ 2]  656 	jra	00105$
                                    657 ;	stm8s_i2c.c: 704: case 0x03:
      0002C5                        658 00103$:
                                    659 ;	stm8s_i2c.c: 705: tempreg = (uint8_t)I2C->SR3;
      0002C5 C6 52 19         [ 1]  660 	ld	a, 0x5219
      0002C8 97               [ 1]  661 	ld	xl, a
                                    662 ;	stm8s_i2c.c: 710: }
      0002C9                        663 00105$:
                                    664 ;	stm8s_i2c.c: 713: if ((tempreg & (uint8_t)I2C_Flag ) != 0)
      0002C9 7B 04            [ 1]  665 	ld	a, (0x04, sp)
      0002CB 89               [ 2]  666 	pushw	x
      0002CC 14 02            [ 1]  667 	and	a, (2, sp)
      0002CE 85               [ 2]  668 	popw	x
      0002CF 4D               [ 1]  669 	tnz	a
      0002D0 27 03            [ 1]  670 	jreq	00107$
                                    671 ;	stm8s_i2c.c: 716: bitstatus = SET;
      0002D2 A6 01            [ 1]  672 	ld	a, #0x01
      0002D4 81               [ 4]  673 	ret
      0002D5                        674 00107$:
                                    675 ;	stm8s_i2c.c: 721: bitstatus = RESET;
      0002D5 4F               [ 1]  676 	clr	a
                                    677 ;	stm8s_i2c.c: 724: return bitstatus;
                                    678 ;	stm8s_i2c.c: 725: }
      0002D6 81               [ 4]  679 	ret
                                    680 ;	stm8s_i2c.c: 759: void I2C_ClearFlag(I2C_Flag_TypeDef I2C_FLAG)
                                    681 ;	-----------------------------------------
                                    682 ;	 function I2C_ClearFlag
                                    683 ;	-----------------------------------------
      0002D7                        684 _I2C_ClearFlag:
                                    685 ;	stm8s_i2c.c: 766: flagpos = (uint16_t)I2C_FLAG & FLAG_Mask;
      0002D7 7B 04            [ 1]  686 	ld	a, (0x04, sp)
      0002D9 97               [ 1]  687 	ld	xl, a
      0002DA 4F               [ 1]  688 	clr	a
                                    689 ;	stm8s_i2c.c: 768: I2C->SR2 = (uint8_t)((uint16_t)(~flagpos));
      0002DB 95               [ 1]  690 	ld	xh, a
      0002DC 53               [ 2]  691 	cplw	x
      0002DD 9F               [ 1]  692 	ld	a, xl
      0002DE C7 52 18         [ 1]  693 	ld	0x5218, a
                                    694 ;	stm8s_i2c.c: 769: }
      0002E1 81               [ 4]  695 	ret
                                    696 ;	stm8s_i2c.c: 791: ITStatus I2C_GetITStatus(I2C_ITPendingBit_TypeDef I2C_ITPendingBit)
                                    697 ;	-----------------------------------------
                                    698 ;	 function I2C_GetITStatus
                                    699 ;	-----------------------------------------
      0002E2                        700 _I2C_GetITStatus:
      0002E2 52 04            [ 2]  701 	sub	sp, #4
                                    702 ;	stm8s_i2c.c: 794: __IO uint8_t enablestatus = 0;
      0002E4 0F 01            [ 1]  703 	clr	(0x01, sp)
                                    704 ;	stm8s_i2c.c: 800: tempregister = (uint8_t)( ((uint16_t)((uint16_t)I2C_ITPendingBit & ITEN_Mask)) >> 8);
      0002E6 0F 04            [ 1]  705 	clr	(0x04, sp)
      0002E8 7B 07            [ 1]  706 	ld	a, (0x07, sp)
      0002EA A4 07            [ 1]  707 	and	a, #0x07
      0002EC 90 5F            [ 1]  708 	clrw	y
      0002EE 5F               [ 1]  709 	clrw	x
      0002EF 97               [ 1]  710 	ld	xl, a
                                    711 ;	stm8s_i2c.c: 803: enablestatus = (uint8_t)(I2C->ITR & ( uint8_t)tempregister);
      0002F0 C6 52 1A         [ 1]  712 	ld	a, 0x521a
      0002F3 89               [ 2]  713 	pushw	x
      0002F4 14 02            [ 1]  714 	and	a, (2, sp)
      0002F6 85               [ 2]  715 	popw	x
      0002F7 6B 01            [ 1]  716 	ld	(0x01, sp), a
                                    717 ;	stm8s_i2c.c: 805: if ((uint16_t)((uint16_t)I2C_ITPendingBit & REGISTER_Mask) == REGISTER_SR1_Index)
      0002F9 4F               [ 1]  718 	clr	a
      0002FA 97               [ 1]  719 	ld	xl, a
      0002FB 7B 07            [ 1]  720 	ld	a, (0x07, sp)
      0002FD A4 30            [ 1]  721 	and	a, #0x30
      0002FF 95               [ 1]  722 	ld	xh, a
                                    723 ;	stm8s_i2c.c: 808: if (((I2C->SR1 & (uint8_t)I2C_ITPendingBit) != RESET) && enablestatus)
      000300 7B 08            [ 1]  724 	ld	a, (0x08, sp)
      000302 6B 02            [ 1]  725 	ld	(0x02, sp), a
                                    726 ;	stm8s_i2c.c: 805: if ((uint16_t)((uint16_t)I2C_ITPendingBit & REGISTER_Mask) == REGISTER_SR1_Index)
      000304 A3 01 00         [ 2]  727 	cpw	x, #0x0100
      000307 26 12            [ 1]  728 	jrne	00110$
                                    729 ;	stm8s_i2c.c: 808: if (((I2C->SR1 & (uint8_t)I2C_ITPendingBit) != RESET) && enablestatus)
      000309 C6 52 17         [ 1]  730 	ld	a, 0x5217
      00030C 14 02            [ 1]  731 	and	a, (0x02, sp)
      00030E 27 08            [ 1]  732 	jreq	00102$
      000310 0D 01            [ 1]  733 	tnz	(0x01, sp)
      000312 27 04            [ 1]  734 	jreq	00102$
                                    735 ;	stm8s_i2c.c: 811: bitstatus = SET;
      000314 A6 01            [ 1]  736 	ld	a, #0x01
      000316 20 12            [ 2]  737 	jra	00111$
      000318                        738 00102$:
                                    739 ;	stm8s_i2c.c: 816: bitstatus = RESET;
      000318 4F               [ 1]  740 	clr	a
      000319 20 0F            [ 2]  741 	jra	00111$
      00031B                        742 00110$:
                                    743 ;	stm8s_i2c.c: 822: if (((I2C->SR2 & (uint8_t)I2C_ITPendingBit) != RESET) && enablestatus)
      00031B C6 52 18         [ 1]  744 	ld	a, 0x5218
      00031E 14 02            [ 1]  745 	and	a, (0x02, sp)
      000320 27 07            [ 1]  746 	jreq	00106$
      000322 0D 01            [ 1]  747 	tnz	(0x01, sp)
      000324 27 03            [ 1]  748 	jreq	00106$
                                    749 ;	stm8s_i2c.c: 825: bitstatus = SET;
      000326 A6 01            [ 1]  750 	ld	a, #0x01
                                    751 ;	stm8s_i2c.c: 830: bitstatus = RESET;
      000328 21                     752 	.byte 0x21
      000329                        753 00106$:
      000329 4F               [ 1]  754 	clr	a
      00032A                        755 00111$:
                                    756 ;	stm8s_i2c.c: 834: return  bitstatus;
                                    757 ;	stm8s_i2c.c: 835: }
      00032A 5B 04            [ 2]  758 	addw	sp, #4
      00032C 81               [ 4]  759 	ret
                                    760 ;	stm8s_i2c.c: 871: void I2C_ClearITPendingBit(I2C_ITPendingBit_TypeDef I2C_ITPendingBit)
                                    761 ;	-----------------------------------------
                                    762 ;	 function I2C_ClearITPendingBit
                                    763 ;	-----------------------------------------
      00032D                        764 _I2C_ClearITPendingBit:
                                    765 ;	stm8s_i2c.c: 879: flagpos = (uint16_t)I2C_ITPendingBit & FLAG_Mask;
      00032D 7B 04            [ 1]  766 	ld	a, (0x04, sp)
      00032F 97               [ 1]  767 	ld	xl, a
      000330 4F               [ 1]  768 	clr	a
                                    769 ;	stm8s_i2c.c: 882: I2C->SR2 = (uint8_t)((uint16_t)~flagpos);
      000331 95               [ 1]  770 	ld	xh, a
      000332 53               [ 2]  771 	cplw	x
      000333 9F               [ 1]  772 	ld	a, xl
      000334 C7 52 18         [ 1]  773 	ld	0x5218, a
                                    774 ;	stm8s_i2c.c: 883: }
      000337 81               [ 4]  775 	ret
                                    776 	.area CODE
                                    777 	.area CONST
                                    778 	.area INITIALIZER
                                    779 	.area CABS (ABS)
